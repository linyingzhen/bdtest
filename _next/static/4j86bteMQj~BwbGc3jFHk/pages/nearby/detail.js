(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{1028:function(e,t,a){"use strict";a.r(t);var n,o,r=a(2),i=a.n(r),c=a(1),l=a.n(c),s=a(6),m=a.n(s),u=a(5),p=a(3),d=a(10),f=a(7),h=a(4),b=a(0),y=a(13),w=a(9),_=a.n(w),g=a(11),v=a(12),E="style-959233",I=h.a.cdn("/static/images/src/index/nearby/Detail");function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t,a,n,o,r,i){try{var c=e[r](i),l=c.value}catch(e){return void a(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var k,A,M,P,T,V,C,D,z,L=(n=function(e){function t(){var e,a,n,r,i,c,l,s,m,u;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var p=arguments.length,d=new Array(p),h=0;h<p;h++)d[h]=arguments[h];return n=this,r=(e=j(t)).call.apply(e,[this].concat(d)),a=!r||"object"!==O(r)&&"function"!=typeof r?N(n):r,i=a,c="state",l=o,s=N(N(a)),l&&Object.defineProperty(i,c,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(s):void 0}),a.fetch={config:{},shopDetail:(m=_.a.mark(function e(){var t,n,o;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((t=a.getState("shopDetail")).allianceId){e.next=7;break}return n=a.params.params.id,o=a.fetchThenSetState("get_merchant_shop-detail","shopDetail",{allianceId:n}),e.next=6,o;case 6:t=e.sent;case 7:return a.page.initMap(t.lon,t.lat),e.abrupt("return",void 0);case 9:case"end":return e.stop()}},e,this)}),u=function(){var e=this,t=arguments;return new Promise(function(a,n){var o=m.apply(e,t);function r(e){S(o,a,n,r,i,"next",e)}function i(e){S(o,a,n,r,i,"throw",e)}r(void 0)})},function(){return u.apply(this,arguments)})},a.page={initMap:function(e,t){a.map=new window.AMap.Map("amap",{center:new window.AMap.LngLat(e,t),zoom:13,features:["bg","road","point"]});window.AMap.plugin(["AMap.ToolBar","AMap.Scale","AMap.OverView"],function(){a.map.addControl(new window.AMap.ToolBar),a.map.addControl(new window.AMap.Scale),a.map.addControl(new window.AMap.OverView({isOpen:!1}))}),window.AMapUI.loadUI(["overlay/SimpleMarker"],function(n){new n({map:a.map,containerClassNames:"".concat(E,"__marker"),iconTheme:"numv1",iconStyle:"red",position:[e,t]})})},doNavigate:function(){var e=a.getState("shopDetail");f.a.__WX__?wx.openLocation({latitude:parseFloat(e.lat),longitude:parseFloat(e.lon),name:e.shopName,address:e.address,scale:12}):window.location="https://m.amap.com/navigation/index/daddr=".concat(e.lon,",").concat(e.lat,",").concat(e.shopName)}},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(t,v["a"]),t}(),k=n.prototype,A="state",M=[g.k],P={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.initState({shopDetail:{}})}},V={},Object.keys(P).forEach(function(e){V[e]=P[e]}),V.enumerable=!!V.enumerable,V.configurable=!!V.configurable,("value"in V||V.initializer)&&(V.writable=!0),V=M.slice().reverse().reduce(function(e,t){return t(k,A,e)||e},V),T&&void 0!==V.initializer&&(V.value=V.initializer?V.initializer.call(T):void 0,V.initializer=void 0),void 0===V.initializer&&(Object.defineProperty(k,A,V),V=null),o=V,n);function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function U(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function F(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function G(e,t){return!t||"object"!==R(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function H(e){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function J(e,t){return(J=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Y=Object(u.c)(L)(C=Object(u.d)((z=D=function(e){function t(){var e,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=G(this,(e=H(t)).call.apply(e,[this].concat(o)))).state={showImgView:!1,imgViewIndex:0},a.showImgView=function(e){return a.setState({showImgView:!0,imgViewIndex:e})},a.hideImgView=function(){return a.setState({showImgView:!1})},a}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&J(e,t)}(t,l.a.Component),a=t,(n=[{key:"componentDidMount",value:function(){if(f.a.__CLIENT__){var e=this.context.$;h.a.removeHD(),y.a.loadAMapJS(function(){return e.fetch.shopDetail()})}}},{key:"componentWillUnmount",value:function(){f.a.__CLIENT__&&h.a.setHD()}},{key:"render",value:function(){var e=this,t=this.context.$,a=t.getState("shopDetail"),n=this.state,o=n.showImgView,r=n.imgViewIndex,c=[];return a.shopFace&&(c=[a.shopFace].concat(U(a.shopPhoto.split(","))).filter(function(e){return!!e})),l.a.createElement(d.k,{title:"经销商",hideHeader:!0},l.a.createElement("div",{id:"amap",className:i.a.dynamic([["332086445",[E,b.a.sm,b.a.border,E,E,E,b.a.border]],["3065521537",[b.a.color_theme,b.a.color_theme,b.a.wind,b.a.color_theme]]])+" amap"}),l.a.createElement("img",{src:"".concat(I,"/navigate").concat(f.a.__IMG_DPR__,".png"),alt:"",onClick:t.page.doNavigate,className:i.a.dynamic([["332086445",[E,b.a.sm,b.a.border,E,E,E,b.a.border]],["3065521537",[b.a.color_theme,b.a.color_theme,b.a.wind,b.a.color_theme]]])+" img-navigate"}),l.a.createElement(p.u,{className:"".concat(E,"__list")},l.a.createElement(p.u.Item,null,l.a.createElement("p",{className:i.a.dynamic([["332086445",[E,b.a.sm,b.a.border,E,E,E,b.a.border]],["3065521537",[b.a.color_theme,b.a.color_theme,b.a.wind,b.a.color_theme]]])+" t-32 t-b"},a.shopName||"-")),l.a.createElement(p.u.Item,{wrap:"wrap"},l.a.createElement(p.l,{className:"t-28",align:"start"},l.a.createElement("span",{className:i.a.dynamic([["332086445",[E,b.a.sm,b.a.border,E,E,E,b.a.border]],["3065521537",[b.a.color_theme,b.a.color_theme,b.a.wind,b.a.color_theme]]])},"地　　址："),l.a.createElement(p.l.Item,null,a.address||"-")),l.a.createElement(p.l,{className:"t-28 mt-xs",align:"start"},l.a.createElement("span",{className:i.a.dynamic([["332086445",[E,b.a.sm,b.a.border,E,E,E,b.a.border]],["3065521537",[b.a.color_theme,b.a.color_theme,b.a.wind,b.a.color_theme]]])},"营业时间："),l.a.createElement(p.l.Item,null,a.businessTime||"-")))),l.a.createElement(p.u,{className:"mt-d"},l.a.createElement(p.u.Item,null,l.a.createElement("p",{className:i.a.dynamic([["332086445",[E,b.a.sm,b.a.border,E,E,E,b.a.border]],["3065521537",[b.a.color_theme,b.a.color_theme,b.a.wind,b.a.color_theme]]])+" t-28"},"简介")),l.a.createElement(p.u.Item,{wrap:!0},l.a.createElement("p",{className:i.a.dynamic([["332086445",[E,b.a.sm,b.a.border,E,E,E,b.a.border]],["3065521537",[b.a.color_theme,b.a.color_theme,b.a.wind,b.a.color_theme]]])+" t-28"},a.intro||"-"))),!!c.length&&l.a.createElement(p.u,{className:"mt-d"},l.a.createElement(p.u.Item,null,l.a.createElement("p",{className:i.a.dynamic([["332086445",[E,b.a.sm,b.a.border,E,E,E,b.a.border]],["3065521537",[b.a.color_theme,b.a.color_theme,b.a.wind,b.a.color_theme]]])+" t-28"},"照片")),l.a.createElement(p.u.Item,{wrap:!0},l.a.createElement("div",{className:i.a.dynamic([["332086445",[E,b.a.sm,b.a.border,E,E,E,b.a.border]],["3065521537",[b.a.color_theme,b.a.color_theme,b.a.wind,b.a.color_theme]]])+" photo"},c.map(function(t,a){return l.a.createElement(p.q,{key:t,className:"".concat(E,"__img"),src:h.a.getAppImgUrl(t,"scale"),onClick:function(){return e.showImgView(a)}})})))),!!c.length&&l.a.createElement(p.r,{show:o,current:r,data:c.map(function(e){return h.a.getAppImgUrl(e,"scale")}),onClose:this.hideImgView}),l.a.createElement(i.a,{styleId:"332086445",css:".".concat(E,"__img{display:inline-block;width:2.4rem !important;height:1.8rem !important;margin-right:").concat(b.a.sm,";border:").concat(b.a.border,";}.").concat(E,"__img:last-child{margin-right:0;}.").concat(E,"__marker{width:0.576rem !important;height:0.576rem !important;}.").concat(E,"__list{border-top:").concat(b.a.border,";}"),dynamic:[E,b.a.sm,b.a.border,E,E,E,b.a.border]}),l.a.createElement(i.a,{styleId:"3065521537",css:".amap.__jsx-style-dynamic-selector{position:relative;padding-bottom:75%;background:#fcf9f2;overflow:hidden;}.detail.__jsx-style-dynamic-selector{background:".concat(b.a.color_theme,";}.content.__jsx-style-dynamic-selector{background:").concat(b.a.color_theme,";}.img-navigate.__jsx-style-dynamic-selector{position:absolute;z-index:100;top:0;margin-top:78%;right:").concat(b.a.wind,";width:1.54rem;height:1.54rem;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);}.photo.__jsx-style-dynamic-selector{background:").concat(b.a.color_theme,";overflow-x:scroll;overflow-y:hidden;white-space:nowrap;}"),dynamic:[b.a.color_theme,b.a.color_theme,b.a.wind,b.a.color_theme]}))}}])&&F(a.prototype,n),o&&F(a,o),t}(),D.contextTypes={$:m.a.object},C=z))||C)||C;t.default=Y},846:function(e,t,a){__NEXT_REGISTER_PAGE("/nearby/detail",function(){return e.exports=a(1028),{page:e.exports.default}})}},[[846,1,0]]]);