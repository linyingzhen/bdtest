(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{834:function(e,t,a){__NEXT_REGISTER_PAGE("/event/cashback",function(){return e.exports=a(977),{page:e.exports.default}})},977:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),c=a(1),i=a.n(c),s=a(6),l=a.n(s),o=a(5),m=a(10),u=a(3),p=a(7),g=a(8),d=a.n(g),f=a(4),b=f.a.cdn("/static/images/src/event/Cashback"),v=[{label:"信息提交成功",value:"1"},{label:"信息审核通过",value:"2"},{label:"信息审核失败",value:"3"},{label:"重新提交信息成功",value:"4"},{label:"奖金发放成功",value:"5"},{label:"奖金发放失败",value:"6"},{label:"报名成功",value:"7"}],y=function(e,t){var a,n=t.$,c=e.className,s=n.getState("eventDetail"),l=s.number,o=s.remainNum;if(l)switch(o.toString().length){case 1:a="0000".concat(o);break;case 2:a="000".concat(o);break;case 3:a="00".concat(o);break;case 4:a="0".concat(o);break;default:a=o}return i.a.createElement("div",{className:"jsx-3878422516 "+(d()("style-118465",c)||"")},0!=l&&i.a.createElement(i.a.Fragment,null,i.a.createElement("img",{src:"".concat(b,"/counter.png"),alt:"",className:"jsx-3878422516 img-counter"}),i.a.createElement("p",{className:"jsx-3878422516 p-num t-48 t-void"},a)),i.a.createElement(r.a,{styleId:"3878422516",css:".style-118465.jsx-3878422516{position:relative;width:100%;min-height:100px;margin-top:55%;text-align:center;}.img-counter.jsx-3878422516{width:6.36rem;height:1.78rem;}.p-num.jsx-3878422516{position:absolute;top:50%;left:50%;margin-top:0.16rem;margin-left:0.92rem;-webkit-letter-spacing:0.28rem;-moz-letter-spacing:0.28rem;-ms-letter-spacing:0.28rem;letter-spacing:0.28rem;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);}"}))};y.contextTypes={$:l.a.object};var h=Object(o.d)(y),x=a(0),E=function(e,t){var a=t.$,n=e.className,c=a.getState("eventDetail").rules,s=void 0===c?"":c;return i.a.createElement("div",{className:r.a.dynamic([["1417477888",[x.a.wind,b,x.a._bg]]])+" "+(d()("style-331385",n)||"")},i.a.createElement("img",{src:"".concat(b,"/rule.png"),alt:"",className:r.a.dynamic([["1417477888",[x.a.wind,b,x.a._bg]]])+" img-rule"}),s&&s.split("\n").map(function(e,t){return i.a.createElement(u.l,{key:t,className:"mt-sm",align:"start"},i.a.createElement("span",{className:r.a.dynamic([["1417477888",[x.a.wind,b,x.a._bg]]])+" p-label t-32 l-64 t-danger t-c t-b"},t+1),i.a.createElement(u.l.Item,null,i.a.createElement("p",{className:r.a.dynamic([["1417477888",[x.a.wind,b,x.a._bg]]])+" p-line t-30 t-void mt-xs"},f.a.stringSplitToArray(e,/\[b\]([\s\S]+?)\[\/b\]/g,/(\[b\])|(\[\/b\])/g,"t-event t-b"))))}),i.a.createElement(r.a,{styleId:"1417477888",css:".style-331385.__jsx-style-dynamic-selector{position:relative;padding:1rem ".concat(x.a.wind," 0;margin-top:8%;}.img-rule.__jsx-style-dynamic-selector{position:absolute;left:0;top:0;width:2.68rem;height:0.88rem;}.p-label.__jsx-style-dynamic-selector{width:0.64rem;height:0.64rem;background-image:url('").concat(b,"/count.png');").concat(x.a._bg,";border-radius:50%;}.p-line.__jsx-style-dynamic-selector{-webkit-letter-spacing:0.01rem;-moz-letter-spacing:0.01rem;-ms-letter-spacing:0.01rem;letter-spacing:0.01rem;text-shadow:0 0.04rem 0.04rem rgba(0,0,0,0.16);}"),dynamic:[x.a.wind,b,x.a._bg]}))};E.contextTypes={$:l.a.object};var _=Object(o.d)(E),w=function(e,t){var a=t.$,n=e.className,r=a.params.params.id,c=a.getState("userInfo").vip,s=a.getState("eventDetail"),l=s.number,o=s.remainNum,m=s.startTime,p=s.tosTime,g=s.vipStart,b=s.endTime,v=a.getState("progress").list,y=a.getState("time").time,h=d()("style-893128",n,"p-w mt-lg");if(0==l&&0===v.length||0!=l&&1===v.length){var x=f.a.toTimestamp(p);return i.a.createElement("div",{className:h},i.a.createElement(u.c,{type:"event",onClick:function(){return f.a.checkWW(function(){y<x?f.a.light("未到填写资料时间"):f.a.router.push("/event/cashback/submit?id=".concat(r),"/event/cashback/submit/".concat(r))})}},"填写资料"))}var E=f.a.toTimestamp(b);if(0===v.length&&y<E){if(0==o&&0!=l)return i.a.createElement("div",{className:h},i.a.createElement(u.c,{disabled:!0},"名额已抢光"));var _=g?f.a.toTimestamp(g):0;if(_&&y<_)return i.a.createElement("div",{className:h},i.a.createElement(u.c,{disabled:!0},"VIP优先锁定中，",f.a.date("m-d H:i:s",_),"开启"));var w=f.a.toTimestamp(m),j=c>0?_:w,N=y>j;return i.a.createElement("div",{className:h},i.a.createElement(u.c,{type:"event",disabled:!N,onClick:function(){return f.a.checkWW(a.do.join)}},N?"立即报名":"".concat(f.a.date("m-d H:i:s",j),"开启")))}return i.a.createElement("div",{className:h},i.a.createElement(u.c,{disabled:!0},"活动已结束"))};w.contextTypes={$:l.a.object};var j=Object(o.d)(w),N=function(e,t){var a=t.$,n=e.className,c=a.params.params.id,s=a.getState("progress").list;return i.a.createElement("div",{className:"jsx-230123474 "+(d()("style-105730",n)||"")},i.a.createElement("img",{src:"".concat(b,"/progress.png"),alt:"",className:"jsx-230123474 img-progress"}),s.map(function(e,t){var a=e.type,n=e.time,r=e.remarks,l=s.length===t+1;return i.a.createElement(u.l,{key:e.id,className:"".concat("style-105730","__item mt-sm"),direction:"column"},0==t?i.a.createElement("img",{src:"".concat(b,"/line_0.png"),alt:"",className:"jsx-230123474"}):i.a.createElement("img",{src:"".concat(b,"/line_1.png"),alt:"",className:"jsx-230123474"}),function(e,t){switch(f.a.getLabel(v,e)){case"信息提交成功":case"信息审核通过":case"重新提交信息成功":case"奖金发放成功":case"报名成功":return t?i.a.createElement("img",{src:"".concat(b,"/green_active.png"),alt:""}):i.a.createElement("img",{src:"".concat(b,"/green.png"),alt:""});default:return t?i.a.createElement("img",{src:"".concat(b,"/red_active.png"),alt:""}):i.a.createElement("img",{src:"".concat(b,"/red.png"),alt:""})}}(a,l),function(e,t,a){if(!t)return null;var n=f.a.getLabel(v,e);return"信息审核失败"!==n&&"奖金发放失败"!==n?null:i.a.createElement("img",{className:"img-rewrite",src:"".concat(b,"/rewrite.png"),alt:"",onClick:function(){return f.a.router.push("/event/cashback/submit?id=".concat(a),"/event/cashback/submit/".concat(a))}})}(a,l,c),i.a.createElement("p",{className:"jsx-230123474 t-32 t-void mt-sm"},f.a.getLabel(v,a)),i.a.createElement("p",{className:"jsx-230123474 t-24 t-void mt-xs"},f.a.lastDate(n)),r&&i.a.createElement("p",{className:"jsx-230123474 t-24 t-void mt-xs t-c"},"（".concat(r,"）")))}),i.a.createElement(r.a,{styleId:"230123474",css:".style-105730.jsx-230123474{position:relative;margin-top:1rem;}.img-progress.jsx-230123474{width:2.68rem;height:0.88rem;}"}))};N.contextTypes={$:l.a.object};var k,S,T=Object(o.d)(N),I=a(9),O=a.n(I),z=a(11),P=a(12),D=a(15),$=a(13);function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L(e,t,a,n,r,c,i){try{var s=e[c](i),l=s.value}catch(e){return void a(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function W(e){return function(){var t=this,a=arguments;return new Promise(function(n,r){var c=e.apply(t,a);function i(e){L(c,n,r,i,s,"next",e)}function s(e){L(c,n,r,i,s,"throw",e)}i(void 0)})}}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function H(e,t){return(H=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function R(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var G,J,F,M,U,V,X=(k=function(e){function t(){var e,a,n,r,c,i,s,l,o,m;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var u=arguments.length,p=new Array(u),g=0;g<u;g++)p[g]=arguments[g];return n=this,r=(e=A(t)).call.apply(e,[this].concat(p)),a=!r||"object"!==C(r)&&"function"!=typeof r?R(n):r,c=a,i="state",s=S,l=R(R(a)),s&&Object.defineProperty(c,i,{enumerable:s.enumerable,configurable:s.configurable,writable:s.writable,value:s.initializer?s.initializer.call(l):void 0}),a.fetch={config:{static:["userInfo"],update:["eventDetail","progress","time"]},userInfo:(o=W(O.a.mark(function e(){var t;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=$.a.fetchUserInfo(),e.t0=a,e.next=4,t;case 4:return e.t1=e.sent,e.t0.setState.call(e.t0,e.t1,"userInfo"),e.abrupt("return",t);case 7:case"end":return e.stop()}},e,this)})),function(){return o.apply(this,arguments)}),eventDetail:function(){var e=a.params.params.id;return a.fetchThenSetState("get_event_detail","eventDetail",{tbId:e})},progress:function(){var e=a.params.params.id;return a.fetchThenSetState("get_event_cash_back_progress","progress",{perateId:e})},time:function(){return a.fetchThenSetState("get_time","time")}},a.do={join:(m=W(O.a.mark(function e(){var t;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.params.params.id,e.next=3,D.a.P("do_event_join",{perateId:t});case 3:f.a.light("报名成功"),a.fetch.eventDetail(),a.fetch.progress();case 6:case"end":return e.stop()}},e,this)})),function(){return m.apply(this,arguments)})},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&H(e,t)}(t,P["a"]),t}(),G=k.prototype,J="state",F=[z.k],M={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.initState({userInfo:$.a.getState("userInfo"),eventDetail:{},progress:p.a.__EMPTY__,time:{}})}},V={},Object.keys(M).forEach(function(e){V[e]=M[e]}),V.enumerable=!!V.enumerable,V.configurable=!!V.configurable,("value"in V||V.initializer)&&(V.writable=!0),V=F.slice().reverse().reduce(function(e,t){return t(G,J,e)||e},V),U&&void 0!==V.initializer&&(V.value=V.initializer?V.initializer.call(U):void 0,V.initializer=void 0),void 0===V.initializer&&(Object.defineProperty(G,J,V),V=null),S=V,k),Y=function(e,t){var a=t.$;if(!p.a.__CLIENT__)return null;var n=a.getState("userInfo"),c=n.niname,s=n._loaded,l=a.getState("eventDetail"),o=l.acNaem,g=l._loaded,d=a.getState("progress")._loaded,f=a.getState("time")._loaded;return s&&g&&d&&f?i.a.createElement(m.k,{className:"style-209664",title:"粉丝福利",hide:!0,theme:"fullTheme"},i.a.createElement(u.x,{className:"".concat("style-209664","__page")},i.a.createElement(u.H,{text:[{text:"粉丝专属福利活动，禁止外传！",style:{"font-size":"40px",x:"40px",y:"200px",opacity:"0.32",fill:"#fff"}},{text:c,style:{"font-size":"40px",x:"42px",y:"250px",opacity:"0.32",fill:"#fff"}}],style:{width:"720px",height:"480px"}},i.a.createElement("p",{className:"jsx-2710250671 "+r.a.dynamic([["3282114716",["style-209664",b]]])+" p-title t-56 t-c"},o),i.a.createElement("img",{src:"".concat(b,"/30.jpg"),alt:"",className:"jsx-2710250671 "+r.a.dynamic([["3282114716",["style-209664",b]]])+" img-bottom"}),i.a.createElement(h,null),i.a.createElement(_,null),i.a.createElement(j,null),i.a.createElement(T,null))),i.a.createElement(r.a,{styleId:"3282114716",css:".".concat("style-209664","__page{position:relative;min-height:100vh;padding-bottom:4rem;background-color:#f86544;background-image:url('").concat(b,"/01.jpg');background-repeat:no-repeat;background-size:100%;overflow-x:hidden;}"),dynamic:["style-209664",b]}),i.a.createElement(r.a,{styleId:"2710250671",css:".p-title.jsx-2710250671{position:absolute;top:0;left:0;width:100%;margin-top:38.4%;color:#fffbda;text-shadow:0.02rem 0.06rem 0.04rem rgba(0,0,0,0.16);}.img-bottom.jsx-2710250671{position:absolute;z-index:0;bottom:0;left:0;width:100%;margin-bottom:-0.02rem;}"})):null};Y.contextTypes={$:l.a.object};var q=Object(o.c)(X)(Object(o.d)(Y));t.default=q}},[[834,1,0]]]);