(window.webpackJsonp=window.webpackJsonp||[]).push([[128],{941:function(e,t,a){__NEXT_REGISTER_PAGE("/sign",function(){return e.exports=a(984),{page:e.exports.default}})},984:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),o=a(1),c=a.n(o),i=a(5),l=a(10),s=a(6),m=a.n(s),u=a(8),d=a.n(u),f=a(3),y=a(7),p=a(4),b=a(0),_=p.a.cdn("/static/images/src/index/Sign");function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var g=function(e){var t,a,n,r=e.userId,o=e.rank,i=e.niname,l=e.faceImg,s=e.createTime;switch(o){case 1:t="0.28rem",a="".concat(_,"/No.1").concat(y.a.__IMG_DPR__,".png"),n=15;break;case 2:t="0.28rem",a="".concat(_,"/No.2").concat(y.a.__IMG_DPR__,".png"),n=15;break;case 3:t="0.28rem",a="".concat(_,"/No.3").concat(y.a.__IMG_DPR__,".png"),n=15}return c.a.createElement(f.l,{justify:"between",key:r,style:{boxSizing:"content-box",padding:"0.24rem 0",borderBottom:"0.01rem solid #F3F3F3"}},c.a.createElement(f.l,null,c.a.createElement(f.q,{src:a,size:t,className:"img-cup"}),c.a.createElement(f.t,{href:""},c.a.createElement(f.q,{className:"face-icon ml-32",src:l,size:"0.72rem"})),c.a.createElement(f.l.Item,{className:"niname ml-20"},c.a.createElement(f.l,{direction:"column"},c.a.createElement("span",{className:"t-30 l-44 t-m",style:{width:"100%",textAlign:"left"}},i),c.a.createElement("span",{className:"t-20 l-28 t-sub",style:{width:"100%",textAlign:"left"}},"签到时间: ",p.a.date("H:i:s",s))))),c.a.createElement("span",{className:"t-primary t-24 l-28"},"+",n,"积分"))},E=function(e,t){var a=t.$,n=e.className,o=a.getState("today").list;return c.a.createElement("div",{className:r.a.dynamic([["2519703978",[b.a.md,b.a.md,b.a.color_theme,b.a.color_theme]]])+" "+(d()("style-157920",n)||"")},c.a.createElement("div",{style:{background:b.a.color_theme,borderRadius:"0.06rem 0.06rem 0 0"},className:r.a.dynamic([["2519703978",[b.a.md,b.a.md,b.a.color_theme,b.a.color_theme]]])},c.a.createElement("p",{className:r.a.dynamic([["2519703978",[b.a.md,b.a.md,b.a.color_theme,b.a.color_theme]]])+" sign-pioneer t-34 l-44 t-b t-c"},"签到先锋"),c.a.createElement("div",{className:r.a.dynamic([["2519703978",[b.a.md,b.a.md,b.a.color_theme,b.a.color_theme]]])+" list"},o.length>0&&c.a.createElement(g,h({rank:1},o[0])),o.length>1&&c.a.createElement(g,h({rank:2},o[1])),o.length>2&&c.a.createElement(g,h({rank:3},o[2])),o.length>0&&o.filter(function(e,t){return t>=3}).map(function(e,t){return c.a.createElement(f.l,{justify:"between",key:e.userId,style:{boxSizing:"content-box",padding:"0.24rem 0",borderBottom:t>=6?"":"0.01rem solid #F3F3F3"}},c.a.createElement(f.l,null,c.a.createElement("span",{className:r.a.dynamic([["2519703978",[b.a.md,b.a.md,b.a.color_theme,b.a.color_theme]]])+" p-ranking"},t+4),c.a.createElement(f.t,{href:""},c.a.createElement(f.q,{className:"face-icon ml-32",src:e.faceImg,size:"0.72rem"})),c.a.createElement(f.l.Item,{className:"niname ml-20"},c.a.createElement(f.l,{direction:"column"},c.a.createElement("span",{style:{width:"100%",textAlign:"left"},className:r.a.dynamic([["2519703978",[b.a.md,b.a.md,b.a.color_theme,b.a.color_theme]]])+" t-30 l-44 t-m"},e.niname),c.a.createElement("span",{style:{width:"100%",textAlign:"left"},className:r.a.dynamic([["2519703978",[b.a.md,b.a.md,b.a.color_theme,b.a.color_theme]]])+" t-20 l-28 t-sub"},"签到时间: ",p.a.date("H:i:s",e.createTime))))),c.a.createElement("span",{className:r.a.dynamic([["2519703978",[b.a.md,b.a.md,b.a.color_theme,b.a.color_theme]]])+" t-primary t-24 l-28 t-m"},"+15积分"))}))),c.a.createElement(r.a,{styleId:"2519703978",css:".style-157920{margin-top:-1.04rem;padding:0.1rem ".concat(b.a.md," 0.56rem ").concat(b.a.md,";}.list{min-height:5rem;padding:0rem 0.5rem 0.48rem 0.5rem;background:").concat(b.a.color_theme,";border-radius:0 0 0.06rem 0.06rem;}.sign-pioneer{padding:0.24rem 0;border-radius:0.06rem 0.06rem 0 0;border-bottom:0.01rem solid #e9e9e9;background-color:").concat(b.a.color_theme,";}.img-cup{width:0.28rem;height:0.28rem;}.face-icon{border-radius:50%;}.p-ranking{width:0.34rem;height:0.48rem;line-height:0.48rem;display:block;color:#556475;text-align:center !important;}.mt-32{margin-top:0.32rem;height:0.72rem;}"),dynamic:[b.a.md,b.a.md,b.a.color_theme,b.a.color_theme]}))};E.contextTypes={$:m.a.object};var v=Object(i.d)(E),w=a(14),j=a.n(w);function k(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}for(var x,N,S,O=(x=new Date,N=x.getDay(),S=x.getDate(),1===N?x:0===N?(x.setDate(S-6),x):(x.setDate(S-N+1),x)),P=[],I=0;I<7;I+=1){var T=O.getFullYear(),z=O.getMonth()+1>=10?O.getMonth()+1:"0".concat(O.getMonth()+1),D=O.getDate()>=10?O.getDate():"0".concat(O.getDate());P.push({y:T,m:z,d:D}),O.setDate(O.getDate()+1)}var M=function(e,t){var a=t.$,n=e.className,o=a.getState("weekSign").list,i=a.getState("userInfo").sign,l=(new Date).getMonth(),s=o.length>=7,m={};return o.forEach(function(e){var t=e.dayNumber<10?"0".concat(e.dayNumber):e.dayNumber;m["".concat(e.dateYm,"-").concat(t)]=!0}),c.a.createElement("div",{className:r.a.dynamic([["1521101482",[b.a.color_desc,b.a.color_sub,b.a.color_sub,"style-162578",b.a.color_primary]]])+" "+(d()("style-162578",n)||"")},c.a.createElement(j.a,{justify:"between",align:"center"},c.a.createElement("p",{className:r.a.dynamic([["1521101482",[b.a.color_desc,b.a.color_sub,b.a.color_sub,"style-162578",b.a.color_primary]]])+" month t-34"},function(e){return["一","二","三","四","五","六","七","八","九","十","十一","十二"][e]}(l),"月")),c.a.createElement(j.a,{className:"mt-24",justify:"around",style:{padding:"0 0.14rem 0.3rem 0.14rem"}},P.length>0&&P.map(function(e,t){var a,n="".concat(e.y,"-").concat(e.m,"-").concat(e.d);return c.a.createElement(j.a.Item,{className:"ml-0",key:e.d},c.a.createElement("span",{className:r.a.dynamic([["1521101482",[b.a.color_desc,b.a.color_sub,b.a.color_sub,"style-162578",b.a.color_primary]]])+" sign-day"},c.a.createElement("i",{className:r.a.dynamic([["1521101482",[b.a.color_desc,b.a.color_sub,b.a.color_sub,"style-162578",b.a.color_primary]]])+" "+(d()("day-num t-34 l-48",(a={},k(a,"".concat("style-162578","__btn-get_active"),!!m[n]),k(a,"today",p.a.date("Y-m-d",(new Date).valueOf()/1e3)===n),a))||"")},t>=6?c.a.createElement(f.q,{size:"0.45rem",transparent:!0,src:"".concat(_,"/gift").concat(y.a.__IMG_DPR__,".png"),alt:""}):"".concat(e.d))))})),c.a.createElement(j.a,{justify:"between",align:"center",className:"mt-28"},c.a.createElement("span",{className:r.a.dynamic([["1521101482",[b.a.color_desc,b.a.color_sub,b.a.color_sub,"style-162578",b.a.color_primary]]])+" t-sub t-24"},"签到领积分 · 连续签到7天有大礼！"),s?c.a.createElement(f.c,{type:"primary",size:"sm",inline:!0,onClick:s?a.doGetPoint:function(){return p.a.light("一周满签可领取88积分")}},"领取奖励"):c.a.createElement(f.c,{type:"primary",size:"sm",disabled:i?"disabled":"",inline:!0,onClick:i?void 0:a.doSign},i?"已签到":"立即签到")),c.a.createElement(r.a,{styleId:"1521101482",css:".style-568441.__jsx-style-dynamic-selector{background:".concat(b.a.color_desc,";}.month.__jsx-style-dynamic-selector{color:").concat(b.a.color_sub,";}.day-box.__jsx-style-dynamic-selector{position:relative;}.sign-day.__jsx-style-dynamic-selector{position:relative;width:100%;display:inline-block;}.day-num.__jsx-style-dynamic-selector{position:relative;display:inline-block;text-align:center;width:100%;line-height:0.7rem;color:").concat(b.a.color_sub,";}.day-num.__jsx-style-dynamic-selector:after{content:'';position:absolute;left:50%;bottom:-0.2rem;display:inline-block;width:0.04rem;height:0.12rem;border-left:1px solid #979797;}.day-num.__jsx-style-dynamic-selector:before{content:'';position:absolute;left:50%;bottom:-0.35rem;-webkit-transform:translate(-50%,0);-ms-transform:translate(-50%,0);transform:translate(-50%,0);display:inline-block;padding-left:0.16rem;width:100%;height:0.12rem;border-top:1px solid #979797;}.").concat("style-162578","__btn-get_active.__jsx-style-dynamic-selector{color:#f5a623;}.today.__jsx-style-dynamic-selector{color:").concat(b.a.color_primary," !important;}"),dynamic:[b.a.color_desc,b.a.color_sub,b.a.color_sub,"style-162578",b.a.color_primary]}))};M.contextTypes={$:m.a.object};var R=Object(i.d)(M),F=function(e){var t=e.className;return c.a.createElement("div",{className:d()("style-807782",t)},c.a.createElement("div",{className:r.a.dynamic([["3182456050",[b.a.wind,b.a.wind,b.a.color_desc]]])+" wrap"},c.a.createElement(R,null),c.a.createElement(r.a,{styleId:"3182456050",css:".style-807782{padding:0 ".concat(b.a.wind," 1.35rem ").concat(b.a.wind,";background:").concat(b.a.color_desc,";}"),dynamic:[b.a.wind,b.a.wind,b.a.color_desc]})))};F.contextTypes={$:m.a.object};var G=Object(i.d)(F),A=function(){return c.a.createElement("div",{className:"jsx-3876428095"},c.a.createElement(f.o,{show:!0,title:"每日签到",ft:c.a.createElement("p",{className:"jsx-3876428095"},c.a.createElement(f.p,{className:"t-34 t-icon",type:"message"}),c.a.createElement(f.p,{className:"t-34 t-icon ml-24",type:"information-circle-fill"})),bd:c.a.createElement("p",{className:"jsx-3876428095 t-34 l-48 t-icon"},"每日签到"),style:{background:"#404040"}}),c.a.createElement(r.a,{styleId:"3876428095",css:""}))};A.contextTypes={$:m.a.object};var $,C,Y=Object(i.d)(A),q=a(9),U=a.n(q),J=a(11),L=a(15),W=a(69),B=a(13);function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function X(e,t,a,n,r,o,c){try{var i=e[o](c),l=i.value}catch(e){return void a(e)}i.done?t(l):Promise.resolve(l).then(n,r)}function K(e){return function(){var t=this,a=arguments;return new Promise(function(n,r){var o=e.apply(t,a);function c(e){X(o,n,r,c,i,"next",e)}function i(e){X(o,n,r,c,i,"throw",e)}c(void 0)})}}function Q(e){return(Q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var ee,te,ae,ne,re,oe,ce,ie=($=function(e){function t(){var e,a,n,r,o,c,i,l;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var s=arguments.length,m=new Array(s),u=0;u<s;u++)m[u]=arguments[u];return n=this,r=(e=Q(t)).call.apply(e,[this].concat(m)),a=!r||"object"!==H(r)&&"function"!=typeof r?Z(n):r,o=a,c="state",i=C,l=Z(Z(a)),i&&Object.defineProperty(o,c,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(l):void 0}),a.initFetch={update:["fetchUserInfo","fetchWeekSign","fetchTodayList"]},a.fetchUserInfo=K(U.a.mark(function e(){var t;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=B.a.fetchUserInfo(),e.t0=a,e.next=4,t;case 4:return e.t1=e.sent,e.t0.setState.call(e.t0,e.t1,"userInfo"),e.abrupt("return",t);case 7:case"end":return e.stop()}},e,this)})),a.fetchWeekSign=function(){return a.fetchThenSetState("get_sign_week-list","weekSign")},a.fetchTodayList=function(){return a.fetchThenSetState("get_sign_today-top-list","today")},a.doSign=K(U.a.mark(function e(){var t,n;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=L.a.P("do_sign"),e.next=3,t;case 3:n=e.sent,p.a.light("签到成功，+".concat(n,"积分")),a.fetchUserInfo(),a.fetchTodayList(),a.fetchWeekSign();case 8:case"end":return e.stop()}},e,this)})),a.doGetPoint=K(U.a.mark(function e(){var t;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.a.P("get_sign_week-point");case 2:t=e.sent,p.a.light("恭喜您领取到,".concat(t,"积分"));case 4:case"end":return e.stop()}},e,this)})),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}(t,W["a"]),t}(),ee=$.prototype,te="state",ae=[J.k],ne={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.initState({userInfo:B.a.toJS("userInfo"),weekSign:y.a.__EMPTY__,today:y.a.__EMPTY__})}},oe={},Object.keys(ne).forEach(function(e){oe[e]=ne[e]}),oe.enumerable=!!oe.enumerable,oe.configurable=!!oe.configurable,("value"in oe||oe.initializer)&&(oe.writable=!0),oe=ae.slice().reverse().reduce(function(e,t){return t(ee,te,e)||e},oe),re&&void 0!==oe.initializer&&(oe.value=oe.initializer?oe.initializer.call(re):void 0,oe.initializer=void 0),void 0===oe.initializer&&(Object.defineProperty(ee,te,oe),oe=null),C=oe,$);function le(e){return(le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function se(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function me(e,t){return!t||"object"!==le(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ue(e){return(ue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function de(e,t){return(de=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var fe=Object(i.b)(ie)(ce=Object(i.d)(ce=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),me(this,ue(t).apply(this,arguments))}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&de(e,t)}(t,c.a.Component),a=t,(n=[{key:"render",value:function(){return c.a.createElement(l.k,{title:"每日签到",header:c.a.createElement(Y,null)},c.a.createElement(G,null),c.a.createElement(v,null),c.a.createElement(r.a,{styleId:"1144174925",css:".t-title{color:#ccc !important;border:none !important;}"}))}}])&&se(a.prototype,n),o&&se(a,o),t}())||ce)||ce;t.default=fe}},[[941,1,0]]]);