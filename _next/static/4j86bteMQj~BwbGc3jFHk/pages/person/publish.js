(window.webpackJsonp=window.webpackJsonp||[]).push([[86],{29:function(e,t,n){"use strict";n.d(t,"e",function(){return a}),n.d(t,"d",function(){return r}),n.d(t,"c",function(){return i}),n.d(t,"b",function(){return o}),n.d(t,"a",function(){return l});var a={1:"一",2:"二",3:"三",4:"四",5:"五",6:"六",7:"七",8:"八",9:"九",10:"十",11:"十一",12:"十二"},r=[{label:"视频",value:"1"},{label:"图文",value:"2"},{label:"纯文",value:"3"},{label:"金币红包",value:"10"},{label:"积分红包",value:"11"},{label:"现金红包",value:"12"},{label:"优惠券红包",value:"13"}],i=[{label:"鱼竿",value:"36"},{label:"鱼饵",value:"38"},{label:"鱼线",value:"37"},{label:"鱼漂",value:"40"},{label:"装备",value:"49"},{label:"服饰",value:"51"},{label:"配件",value:"50"}],o=[{label:"社区",href:"/bbs"},{label:"话题",href:"/bbs/topic"},{label:"视频",href:"/video"}],l=[{label:"工商银行",value:"工商银行",icon:"gongshang",type:"danger"},{label:"农业银行",value:"农业银行",icon:"nongye",type:"success"},{label:"中国银行",value:"中国银行",icon:"zhongguo"},{label:"建设银行",value:"建设银行",icon:"jianshe",type:"primary"},{label:"招商银行",value:"招商银行",icon:"zhaoshang",type:"danger"},{label:"广发银行",value:"广发银行",icon:"guangfa",type:"danger"},{label:"邮政储蓄银行",value:"邮政储蓄银行",icon:"youzheng",type:"success"},{label:"光大银行",value:"光大银行",icon:"guangda",type:"warning"},{label:"中信银行",value:"中信银行",icon:"zhongxin",type:"danger"},{label:"交通银行",value:"交通银行",icon:"jiaotong",type:"danger"},{label:"兴业银行",value:"兴业银行",icon:"xingye",type:"primary"},{label:"浦发银行",value:"浦发银行",icon:"pufa",type:"primary"},{label:"华夏银行",value:"华夏银行",icon:"huaxia",type:"danger"},{label:"深圳发展银行",value:"深圳发展银行",icon:"shenzhenfazhan",type:"primary"},{label:"广州农商银行",value:"广州农商银行",icon:"nongshang",type:"warning"},{label:"民生银行",value:"民生银行",icon:"minsheng",type:"primary"},{label:"北京银行",value:"北京银行",icon:"beijing",type:"danger"},{label:"平安银行",value:"平安银行",icon:"pingan",type:"danger"},{label:"天津银行",value:"天津银行",icon:"tianjin",type:"primary"},{label:"上海银行",value:"上海银行",icon:"shanghai",type:"warning"},{label:"南京银行",value:"南京银行",icon:"nanjing",type:"danger"},{label:"宁波银行",value:"宁波银行",icon:"ningbo",type:"warning"},{label:"杭州银行",value:"杭州银行",icon:"hangzhou",type:"primary"},{label:"江苏银行",value:"江苏银行",icon:"jiangsu",type:"warning"},{label:"重庆银行",value:"重庆银行",icon:"chongqin",type:"success"},{label:"成都银行",value:"成都银行",icon:"chengdu",type:"warning"},{label:"哈尔滨银行",value:"哈尔滨银行",icon:"haerbin",type:"danger"},{label:"其他",value:"其他",icon:"",type:"primary"}]},899:function(e,t,n){__NEXT_REGISTER_PAGE("/person/publish",function(){return e.exports=n(999),{page:e.exports.default}})},999:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(6),o=n.n(i),l=n(5),c=n(10),u=n(3),s=n(4),f=n(29),b=s.a.cdn("/static/images/src/discovery/Index"),p=[{title:"动态"},{title:"帖子"},{title:"视频"}];function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=function(e,t){var n,a=t.$,i=a.getState("_affixTabs").page,o={};switch(p[i].title){case"帖子":o={id:e.postId,title:e.title,desc:e.content,createTime:e.createTime,likeCount:e.likeAdd,commentCount:e.replyNum,imgs:e.contentImg,href:"/bbs/article?id=".concat(e.threadId),as:"/bbs/article/".concat(e.threadId),onDelete:a.do.delete};break;case"视频":o={title:e.tit,desc:e.introCon,createTime:e.createTime,likeCount:e.likeCount,commentCount:e.recomNo,video:{filePath:e.fileinfo.path,sfPath:e.fileinfo.surface,fileSize:e.fileinfo.size,playSeconds:e.fileinfo.play_time},href:"/video/detail?id=".concat(e.tbId),as:"/video/detail/".concat(e.tbId)};break;default:switch(n=s.a.getLabel(f.d,e.infoType),o={id:e.infoId,title:e.con,createTime:e.publishTime,likeCount:e.likeCount,commentCount:e.commentCount,href:"/discovery/detail?id=".concat(e.infoId),as:"/discovery/detail/".concat(e.infoId),onDelete:a.do.delete},n){case"视频":o.video=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){d(e,t,n[t])})}return e}({},e.fileList[0]);break;case"图文":o.imgs=e.fileList.map(function(e){return e.fileId});break;case"金币红包":case"积分红包":case"现金红包":o.title=n,o.imgs=["".concat(b,"/red-user-none.png")]}}return r.a.createElement(c.u,o)};y.contextTypes={$:o.a.object};var v=Object(l.d)(y),h=function(e,t){var n,a,i=t.$,o=i.getState("_affixTabs").page,l=i.getState("discovery"),c=i.getState("bbs"),s=i.getState("video");switch(p[o].title){case"帖子":n=c,a=i.fetch.bbs;break;case"视频":n=s,a=i.fetch.video;break;default:n=l,a=i.fetch.discovery}return r.a.createElement(u.a,{tabs:p,page:o,onTabClick:i.page.onTabClick},r.a.createElement(u.v,{className:"tool-list-split",data:n,renderRow:function(e){return r.a.createElement(v,e)},onEndReached:a}))};h.contextTypes={$:o.a.object};var g,m,_=Object(l.d)(h),w=n(9),S=n.n(w),j=n(11),O=n(12),T=n(15),k=n(7),I=n(13);function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t,n,a,r,i,o){try{var l=e[i](o),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(a,r)}function E(e){return function(){var t=this,n=arguments;return new Promise(function(a,r){var i=e.apply(t,n);function o(e){x(i,a,r,o,l,"next",e)}function l(e){x(i,a,r,o,l,"throw",e)}o(void 0)})}}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function L(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var R,D,$,B,M,N,A,J,Y,G=(g=function(e){function t(){var e,n,a,r,i,o,l,c,u,f,b,d;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var y=arguments.length,v=new Array(y),h=0;h<y;h++)v[h]=arguments[h];return a=this,r=(e=z(t)).call.apply(e,[this].concat(v)),n=!r||"object"!==P(r)&&"function"!=typeof r?L(a):r,i=n,o="state",l=m,c=L(L(n)),l&&Object.defineProperty(i,o,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(c):void 0}),n.fetch={config:{static:["userInfo"],one:["discovery"]},userInfo:(u=E(S.a.mark(function e(){var t;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=I.a.fetchUserInfo(),e.t0=n,e.next=4,t;case 4:return e.t1=e.sent,e.t0.setState.call(e.t0,e.t1,"userInfo"),e.abrupt("return",t);case 7:case"end":return e.stop()}},e,this)})),function(){return u.apply(this,arguments)}),discovery:function(e){return n.fetchListThenSetState("get_my_discovery_list","discovery",{},e)},bbs:function(e){return n.fetchListThenSetState("get_bbs_my-post-list","bbs",{},e)},video:function(e){var t=n.getState("userInfo").userId;return n.fetchListThenSetState("get_video_list-list","video",{_:{limit:k.a.__LIMIT__,order:{createTime:"desc"},search:{userId:t}}},e)}},n.do={delete:(d=E(S.a.mark(function e(t){var a,r;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=n.getState("_affixTabs"),r=a.page,"动态"===p[r].title&&n.do.deleteDiscovery(t),"帖子"===p[r].title&&n.do.deleteBBS(t);case 3:case"end":return e.stop()}},e,this)})),function(e){return d.apply(this,arguments)}),deleteDiscovery:(b=E(S.a.mark(function e(t){return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.P("do_delete_publish",{infoId:t});case 2:s.a.light("删除成功"),n.fetch.discovery(!0);case 4:case"end":return e.stop()}},e,this)})),function(e){return b.apply(this,arguments)}),deleteBBS:(f=E(S.a.mark(function e(t){return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.P("do_bbs_delete-post",{postId:t});case 2:s.a.light("删除成功"),n.fetch.bbs(!0);case 4:case"end":return e.stop()}},e,this)})),function(e){return f.apply(this,arguments)})},n.page={onTabClick:function(e,t){(n.setState({page:t},"_affixTabs"),"帖子"===p[t].title)&&(n.getState("bbs")._loaded||n.fetch.bbs());"视频"===p[t].title&&(n.getState("video")._loaded||n.fetch.video());s.a.scrollTo(0)}},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(t,O["a"]),t}(),R=g.prototype,D="state",$=[j.k],B={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.initState({_affixTabs:{page:0},userInfo:I.a.toJS("userInfo"),discovery:k.a.__EMPTY__,bbs:k.a.__EMPTY__,video:k.a.__EMPTY__})}},N={},Object.keys(B).forEach(function(e){N[e]=B[e]}),N.enumerable=!!N.enumerable,N.configurable=!!N.configurable,("value"in N||N.initializer)&&(N.writable=!0),N=$.slice().reverse().reduce(function(e,t){return t(R,D,e)||e},N),M&&void 0!==N.initializer&&(N.value=N.initializer?N.initializer.call(M):void 0,N.initializer=void 0),void 0===N.initializer&&(Object.defineProperty(R,D,N),N=null),m=N,g);function q(e){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function U(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function X(e,t){return!t||"object"!==q(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function F(e){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function H(e,t){return(H=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var K=Object(l.c)(G)(A=Object(l.d)((Y=J=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),X(this,F(t).apply(this,arguments))}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&H(e,t)}(t,r.a.Component),n=t,(a=[{key:"render",value:function(){return r.a.createElement(c.k,{title:"我的发布"},r.a.createElement(_,null))}}])&&U(n.prototype,a),i&&U(n,i),t}(),J.contextTypes={$:o.a.object},A=Y))||A)||A;t.default=K}},[[899,1,0]]]);