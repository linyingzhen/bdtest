(window.webpackJsonp=window.webpackJsonp||[]).push([[84],{897:function(e,a,t){__NEXT_REGISTER_PAGE("/person/prize",function(){return e.exports=t(995),{page:e.exports.default}})},995:function(e,a,t){"use strict";t.r(a);var r=t(1),n=t.n(r),i=t(6),c=t.n(i),s=t(5),o=t(3),l=t(10),d=t(8),m=t.n(d),u=t(2),p=t.n(u),f=t(4),b=t(0),y="style-208135",_=function(e,a){var t,r,i=a.$,c=e.tbId,s=e.lotteryType,l=e.prizeType,d=e.imgId,u=e.prizeName,_=e.prizeVal,w=e.expdatebegin,h=e.expdateend,v=e.userDel,g=e.className;switch(parseInt(s)){case 1:t="大转盘";break;case 2:t="福利领券";break;case 3:t="邀请活动";break;case 4:t="VIP月初赠送优惠券";break;case 5:t="VIP领券"}switch(parseInt(l)){case 1:r="实物券";break;case 2:r="现金券"}var x=Date.parse(new Date)/1e3-h>=0,E="0"==v;return n.a.createElement("div",{className:p.a.dynamic([["1915879907",[y,b.a.border]],["2880745541",[b.a.wind,b.a.radius_sm]]])+" "+y},n.a.createElement(o.u.Item,{className:m()(y,g),thumb:n.a.createElement(o.q,{className:"".concat(y,"__thumb"),src:d,size:"1rem",lazyload:!0,onClick:function(){return f.a.router.push("/person/prize/detail?id=".concat(c),"/person/prize/detail/".concat(c))}}),href:"/person/prize/detail?id=".concat(c),as:"/person/prize/detail/".concat(c)},n.a.createElement("div",{className:p.a.dynamic([["1915879907",[y,b.a.border]],["2880745541",[b.a.wind,b.a.radius_sm]]])+" row-box"},n.a.createElement("div",{style:{flex:2.2},className:p.a.dynamic([["1915879907",[y,b.a.border]],["2880745541",[b.a.wind,b.a.radius_sm]]])+" row-center"},n.a.createElement("p",{className:p.a.dynamic([["1915879907",[y,b.a.border]],["2880745541",[b.a.wind,b.a.radius_sm]]])+" t-30 l-42 name"},r,"(",u,")"),n.a.createElement("p",{className:p.a.dynamic([["1915879907",[y,b.a.border]],["2880745541",[b.a.wind,b.a.radius_sm]]])+" t-24 l-32 t-sub"},"奖品来源:",t)),n.a.createElement("div",{className:p.a.dynamic([["1915879907",[y,b.a.border]],["2880745541",[b.a.wind,b.a.radius_sm]]])+" t-22 l-32 t-sub row-right"},n.a.createElement("span",{className:p.a.dynamic([["1915879907",[y,b.a.border]],["2880745541",[b.a.wind,b.a.radius_sm]]])+" t-44 l-32 t-danger ml-xs mr-xs"},parseInt(_)),n.a.createElement("span",{className:p.a.dynamic([["1915879907",[y,b.a.border]],["2880745541",[b.a.wind,b.a.radius_sm]]])+" t-24 l-32 t-sub"},"元")))),n.a.createElement(o.l,null,x?n.a.createElement("p",{className:p.a.dynamic([["1915879907",[y,b.a.border]],["2880745541",[b.a.wind,b.a.radius_sm]]])+" time t-24 l-32 t-sub"},n.a.createElement("span",{className:p.a.dynamic([["1915879907",[y,b.a.border]],["2880745541",[b.a.wind,b.a.radius_sm]]])},"已过期("),n.a.createElement("span",{className:p.a.dynamic([["1915879907",[y,b.a.border]],["2880745541",[b.a.wind,b.a.radius_sm]]])},f.a.date("m.d",w)),n.a.createElement("span",{className:p.a.dynamic([["1915879907",[y,b.a.border]],["2880745541",[b.a.wind,b.a.radius_sm]]])}," - "),n.a.createElement("span",{className:p.a.dynamic([["1915879907",[y,b.a.border]],["2880745541",[b.a.wind,b.a.radius_sm]]])},f.a.date("m.d",h),")")):n.a.createElement("p",{className:p.a.dynamic([["1915879907",[y,b.a.border]],["2880745541",[b.a.wind,b.a.radius_sm]]])+" time t-24 l-32"},n.a.createElement("span",{className:p.a.dynamic([["1915879907",[y,b.a.border]],["2880745541",[b.a.wind,b.a.radius_sm]]])},"购买时间："),n.a.createElement("span",{className:p.a.dynamic([["1915879907",[y,b.a.border]],["2880745541",[b.a.wind,b.a.radius_sm]]])},f.a.date("m.d H:i",w)),n.a.createElement("span",{className:p.a.dynamic([["1915879907",[y,b.a.border]],["2880745541",[b.a.wind,b.a.radius_sm]]])}," - "),n.a.createElement("span",{className:p.a.dynamic([["1915879907",[y,b.a.border]],["2880745541",[b.a.wind,b.a.radius_sm]]])},f.a.date("m.d H:i",h))),E?n.a.createElement("p",{onClick:function(){return i.page.toManager(c,!0)},className:p.a.dynamic([["1915879907",[y,b.a.border]],["2880745541",[b.a.wind,b.a.radius_sm]]])+" t-24 l-32 t-primary btn"},"删除"):n.a.createElement("p",{onClick:function(){return i.page.toManager(c,!1)},className:p.a.dynamic([["1915879907",[y,b.a.border]],["2880745541",[b.a.wind,b.a.radius_sm]]])+" t-24 l-32 t-primary btn"},"恢复"),n.a.createElement("a",{href:"/person/prize/detail?id=".concat(c),className:p.a.dynamic([["1915879907",[y,b.a.border]],["2880745541",[b.a.wind,b.a.radius_sm]]])+" t-24 l-32 t-primary btn"},"详情")),n.a.createElement(p.a,{styleId:"1915879907",css:".".concat(y,"__thumb{border:").concat(b.a.border,";}.style-208135 .am-list-item .am-list-line{padding-right:0 !important;}"),dynamic:[y,b.a.border]}),n.a.createElement(p.a,{styleId:"2880745541",css:".style-208135.__jsx-style-dynamic-selector{margin:".concat(b.a.wind,";background:#EEF0F4;border-radius:").concat(b.a.radius_sm,";overflow:hidden;}.row-box.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;text-align:center;}.row-center.__jsx-style-dynamic-selector{-webkit-flex:2.2;-ms-flex:2.2;flex:2.2;padding-right:.12rem;border-right:1px dashed #ccc;text-align:left;}.row-right.__jsx-style-dynamic-selector{-webkit-flex:1;-ms-flex:1;flex:1;padding-left:0.1rem;}.time.__jsx-style-dynamic-selector{padding:.24rem 0 .24rem .32rem;-webkit-flex:8;-ms-flex:8;flex:8;}.btn.__jsx-style-dynamic-selector{padding:0.24rem 0.12rem 0.24rem 0;-webkit-flex:1;-ms-flex:1;flex:1;}"),dynamic:[b.a.wind,b.a.radius_sm]}))};_.contextTypes={$:c.a.object};var w=Object(s.d)(_);function h(){return(h=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}var v=function(e){var a=e.data,t=void 0===a?{}:a,r=e.onEndReached,i=e.className,c=t.nowTime;return n.a.createElement(o.v,{className:m()(i,"tool-list-split"),data:t,renderRow:function(e){return n.a.createElement(w,h({nowTime:c},e))},onEndReached:r})};v.contextTypes={$:c.a.object};var g,x,E=Object(s.d)(v),z=t(9),k=t.n(z),P=t(11),N=t(12),j=t(7),T=t(15);function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(e,a,t,r,n,i,c){try{var s=e[i](c),o=s.value}catch(e){return void t(e)}s.done?a(o):Promise.resolve(o).then(r,n)}function S(e){return function(){var a=this,t=arguments;return new Promise(function(r,n){var i=e.apply(a,t);function c(e){I(i,r,n,c,s,"next",e)}function s(e){I(i,r,n,c,s,"throw",e)}c(void 0)})}}function L(e,a){for(var t=0;t<a.length;t++){var r=a[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,a){return(C=Object.setPrototypeOf||function(e,a){return e.__proto__=a,e})(e,a)}function M(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var D,$,V,A,F,G,H=(g=function(e){function a(){var e,t,r,n,i,c,s,o,l,d,m;!function(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this,a);for(var u=arguments.length,p=new Array(u),b=0;b<u;b++)p[b]=arguments[b];return r=this,n=(e=R(a)).call.apply(e,[this].concat(p)),t=!n||"object"!==O(n)&&"function"!=typeof n?M(r):n,i=t,c="state",s=x,o=M(M(t)),s&&Object.defineProperty(i,c,{enumerable:s.enumerable,configurable:s.configurable,writable:s.writable,value:s.initializer?s.initializer.call(o):void 0}),t.fetch={config:{update:["fetchPrizeList","fetchRemovePrizeList"]},fetchPrizeList:(d=S(k.a.mark(function e(){var a,r;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=T.a.PP("get_my-prize_list",{_:{limit:j.a.__LIMIT__,search:{"prizeType[!]":0,userDel:0}}}),e.next=3,a;case 3:if(0===(r=e.sent).code){e.next=7;break}return f.a.light(r.err),e.abrupt("return",!1);case 7:return t.setState(r.data,"prizeList"),e.abrupt("return",a);case 9:case"end":return e.stop()}},e,this)})),function(){return d.apply(this,arguments)}),fetchRemovePrizeList:(l=S(k.a.mark(function e(){var a,r;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=T.a.PP("get_my-prize_list",{_:{limit:j.a.__LIMIT__,search:{"prizeType[!]":0,userDel:1}}}),e.next=3,a;case 3:if(0===(r=e.sent).code){e.next=7;break}return f.a.light(r.err),e.abrupt("return",!1);case 7:return t.setState(r.data,"removePrizeList"),e.abrupt("return",a);case 9:case"end":return e.stop()}},e,this)})),function(){return l.apply(this,arguments)}),time:function(){return t.fetchThenSetState("get_time","time")}},t.page={onTabClick:function(e,a){t.setState({page:a},"_affixTabs"),f.a.scrollTo(0)},toManager:(m=S(k.a.mark(function e(a,r){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.PP("do_my-prize_del",{tbId:a,del:r?"1":"0"});case 2:f.a.light(r?"移进回收站成功":"恢复成功"),t.fetch.fetchPrizeList(!0),t.fetch.fetchRemovePrizeList(!0);case 5:case"end":return e.stop()}},e,this)})),function(e,a){return m.apply(this,arguments)})},t.do={},t}var t,r,n;return function(e,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(a&&a.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),a&&C(e,a)}(a,N["a"]),t=a,(r=[{key:"storeInit",value:function(){var e=this.params.params.id;1==e&&this.setState({page:e},"_affixTabs")}}])&&L(t.prototype,r),n&&L(t,n),a}(),D=g.prototype,$="state",V=[P.k],A={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.initState({_affixTabs:{page:0},prizeList:j.a.__EMPTY__,removePrizeList:j.a.__EMPTY__})}},G={},Object.keys(A).forEach(function(e){G[e]=A[e]}),G.enumerable=!!G.enumerable,G.configurable=!!G.configurable,("value"in G||G.initializer)&&(G.writable=!0),G=V.slice().reverse().reduce(function(e,a){return a(D,$,e)||e},G),F&&void 0!==G.initializer&&(G.value=G.initializer?G.initializer.call(F):void 0,G.initializer=void 0),void 0===G.initializer&&(Object.defineProperty(D,$,G),G=null),x=G,g),J=[{title:"优惠卷"},{title:"回收站"}],Y=function(e,a){var t=a.$,r=t.getState("_affixTabs").page,i=t.getState("prizeList"),c=t.getState("removePrizeList");return n.a.createElement(l.k,{title:"礼品详情"},n.a.createElement(o.a,{tabs:J,align:"center",animated:!0,destroyInactiveTab:!1,page:r,onTabClick:t.page.onTabClick},n.a.createElement(E,{className:"mt-d",data:i,onEndReached:t.fetch.fetchPrizeList}),n.a.createElement(E,{className:"mt-d",data:c,onEndReached:t.fetch.fetchRemovePrizeList})))};Y.contextTypes={$:c.a.object};var q=Object(s.c)(H)(Object(s.d)(Y));a.default=q}},[[897,1,0]]]);