(window.webpackJsonp=window.webpackJsonp||[]).push([[131],{28:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=m(a(16)),r=m(a(21)),o=m(a(18)),c=m(a(19)),i=m(a(17)),l=m(a(20)),u=m(a(8)),s=m(a(1));function m(e){return e&&e.__esModule?e:{default:e}}var d=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&(a[n[r]]=e[n[r]])}return a},f=function(e){function t(){return(0,o.default)(this,t),(0,i.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,l.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){var e,t,a=this.props,o=a.className,c=a.prefixCls,i=a.children,l=a.text,m=a.size,f=a.overflowCount,p=a.dot,y=a.corner,h=a.hot,b=d(a,["className","prefixCls","children","text","size","overflowCount","dot","corner","hot"]);f=f,l="number"==typeof l&&l>f?f+"+":l,p&&(l="");var _=(0,u.default)((e={},(0,r.default)(e,c+"-dot",p),(0,r.default)(e,c+"-dot-large",p&&"large"===m),(0,r.default)(e,c+"-text",!p&&!y),(0,r.default)(e,c+"-corner",y),(0,r.default)(e,c+"-corner-large",y&&"large"===m),e)),w=(0,u.default)(c,o,(t={},(0,r.default)(t,c+"-not-a-wrapper",!i),(0,r.default)(t,c+"-corner-wrapper",y),(0,r.default)(t,c+"-hot",!!h),(0,r.default)(t,c+"-corner-wrapper-large",y&&"large"===m),t));return s.default.createElement("span",{className:w},i,(l||p)&&s.default.createElement("sup",(0,n.default)({className:_},b),l))}}]),t}(s.default.Component);t.default=f,f.defaultProps={prefixCls:"am-badge",size:"small",overflowCount:99,dot:!1,corner:!1},e.exports=t.default},944:function(e,t,a){__NEXT_REGISTER_PAGE("/video/detail",function(){return e.exports=a(965),{page:e.exports.default}})},965:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(6),c=a.n(o),i=a(5),l=a(10),u=a(8),s=a.n(u),m=function(e,t){var a=t.$,n=e.className,o=a.getState("comment");return r.a.createElement("div",{className:s()("style-202696",n)},r.a.createElement(l.i,{title:"最新评论"}),r.a.createElement(l.d,{data:o,onEndReached:a.fetch.comment,onCommentClick:a.page.onCommentClick}))};m.contextTypes={$:c.a.object};var d=Object(i.d)(m),f=a(3),p=a(4),y=function(e,t){var a=t.$,n=e.className,o=a.getState("_fixedTextarea"),c=o.show,i=o.placeholder,l=o.onSubmit;return r.a.createElement(r.a.Fragment,null,r.a.createElement(f.k,{show:c,placeholder:i,onSubmit:l,onClose:a.page.hideFixedTextarea}),!c&&r.a.createElement(f.j,{className:s()("style-117097",n),onInputClick:a.page.onCommentClick},r.a.createElement(f.p,{className:"t-48",type:"gift",onClick:function(){return p.a.checkLogin(a.page.showReward)}})))};y.contextTypes={$:c.a.object};var h=Object(i.d)(y),b=function(e,t){var a=t.$,n=e.className,o=a.getState("random");return r.a.createElement(l.t,{className:s()("style-732813",n),title:"推荐视频",data:o})};b.contextTypes={$:c.a.object};var _=Object(i.d)(b),w=function(e,t){var a=t.$,n=a.getState("_reward").show;return r.a.createElement(f.A,{show:n,onCancel:a.page.hideReward,onSuccess:a.do.reward})};w.contextTypes={$:c.a.object};var v=Object(i.d)(w),g=function(e,t){var a=t.$,n=e.className,o=a.getState("reward");return r.a.createElement(l.n,{className:s()("style-214801",n),data:o.list})};g.contextTypes={$:c.a.object};var E=Object(i.d)(g),x=function(e,t){var a=t.$,n=e.className,o=a.getState("detail").fileinfo,c=void 0===o?{}:o;return r.a.createElement(f.G,{className:s()("style-147877",n),src:c.path,poster:c.surface,fileSize:c.size,playSecond:c.play_time})};x.contextTypes={$:c.a.object};var O=Object(i.d)(x),S=a(28),j=a.n(S),T=a(2),N=a.n(T),P=a(0),I=function(e,t){var a=t.$,n=e.className,o=a.getState("detail"),c=o.tit,i=o.introCon,l=o.createTime,u=o.userId,m=o.userinfo,d=void 0===m?{}:m,y=o.from;return r.a.createElement("div",{className:N.a.dynamic([["3464524515",[P.a.wind,P.a.color_theme]]])+" "+(s()("style-173475",n)||"")},r.a.createElement(f.l,{align:"start"},r.a.createElement("h4",{className:N.a.dynamic([["3464524515",[P.a.wind,P.a.color_theme]]])+" t-34 l-48 t-title"},c),0==y&&r.a.createElement(j.a,{className:"ml-sm mt-8",text:"官方",style:P.a._badge})),r.a.createElement("p",{className:N.a.dynamic([["3464524515",[P.a.wind,P.a.color_theme]]])+" t-28 l-42 t-sub mt-xs"},i),r.a.createElement("p",{className:N.a.dynamic([["3464524515",[P.a.wind,P.a.color_theme]]])+" t-24 l-34 mt-sm"},!!u&&r.a.createElement(r.a.Fragment,null,r.a.createElement(f.t,{className:"t-primary",href:"/person/zone?id=".concat(u),as:"/person/zone/".concat(u)},d.userName),r.a.createElement("span",{className:N.a.dynamic([["3464524515",[P.a.wind,P.a.color_theme]]])+" t-sub"}," ","· 发表于",p.a.date(l)))),r.a.createElement(f.l,{className:"mt-32",justify:"end"},r.a.createElement(f.l,null,r.a.createElement(f.p,{className:"t-36 t-icon",type:"star-fill"}),r.a.createElement("span",{className:N.a.dynamic([["3464524515",[P.a.wind,P.a.color_theme]]])+" t-24 l-34 t-sub ml-xs"},"收藏")),r.a.createElement(f.l,{className:"ml-48"},r.a.createElement(f.p,{className:"t-36 t-icon",type:"hand"}),r.a.createElement("span",{className:N.a.dynamic([["3464524515",[P.a.wind,P.a.color_theme]]])+" t-24 l-34 t-sub ml-xs"},"点赞"))),r.a.createElement(N.a,{styleId:"3464524515",css:".style-173475.__jsx-style-dynamic-selector{min-height:2.88rem;padding:0.28rem ".concat(P.a.wind," 0.44rem;background:").concat(P.a.color_theme,";}"),dynamic:[P.a.wind,P.a.color_theme]}))};I.contextTypes={$:c.a.object};var C,k,z=Object(i.d)(I),$=a(9),R=a.n($),F=a(11),M=a(12),L=a(15),Y=a(7);function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function G(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function J(e,t,a,n,r,o,c){try{var i=e[o](c),l=i.value}catch(e){return void a(e)}i.done?t(l):Promise.resolve(l).then(n,r)}function D(e){return function(){var t=this,a=arguments;return new Promise(function(n,r){var o=e.apply(t,a);function c(e){J(o,n,r,c,i,"next",e)}function i(e){J(o,n,r,c,i,"throw",e)}c(void 0)})}}function X(e){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function q(e,t){return(q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function B(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var H,K,Q,U,V,W,Z,ee,te,ae=(C=function(e){function t(){var e,a,n,r,o,c,i,l,u,s,m;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var d=arguments.length,f=new Array(d),y=0;y<d;y++)f[y]=arguments[y];return n=this,r=(e=X(t)).call.apply(e,[this].concat(f)),a=!r||"object"!==A(r)&&"function"!=typeof r?B(n):r,o=a,c="state",i=k,l=B(B(a)),i&&Object.defineProperty(o,c,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(l):void 0}),a.fetch={config:{one:["detail","random","reward"],update:["comment"]},detail:(u=D(R.a.mark(function e(){var t;return R.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.params.params.id,e.abrupt("return",a.fetchThenSetState("get_video_detail","detail",{tbId:t}));case 2:case"end":return e.stop()}},e,this)})),function(){return u.apply(this,arguments)}),list:function(e){return a.fetchThenSetState("get_video_list-list","list",{_:{limit:9,search:{typeId:e}}})},random:function(){return a.fetchThenSetState("get_random_video_list-list","random",{_:{limit:6}})},comment:function(e){var t=a.params.params.id;return a.fetchListThenSetState("get_video-v2_comment-list","comment",{_:{limit:Y.a.__LIMIT__,order:{createTime:"desc"},search:{videoId:t}}},e)},updateComment:function(e){var t=a.params.params.id;return a.updateOneThenSetState("get_video-v2_comment-list","comment",{videoId:t,tbId:e},"tbId")},reward:function(){var e=a.params.params.id;return a.fetchThenSetState("get_new_reward-list","reward",{_:{limit:Y.a.__LIMIT__,search:{dataId:e,typeId:1}}})}},a.do={comment:(m=D(R.a.mark(function e(t){var n,r,o,c,i;return R.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.rootId,r=t.parId,o=t.con,!(p.a.getCharLength(o)<2)){e.next=4;break}return p.a.light("回复字数太少"),e.abrupt("return");case 4:return c={con:o},r?c.parId=r:(i=a.params.params.id,c.tbId=i),e.next=8,L.a.P("do_video-v2_comment",c);case 8:a.page.hideFixedTextarea(),p.a.light("回复成功"),r?a.fetch.updateComment(n):a.fetch.comment(!0);case 11:case"end":return e.stop()}},e,this)})),function(e){return m.apply(this,arguments)}),reward:(s=D(R.a.mark(function e(t){var n;return R.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.params.params.id,e.next=3,L.a.P("do_new_reward",{dataId:n,typeId:1,goodsId:t});case 3:a.page.hideReward(),p.a.light("打赏成功"),a.fetch.reward();case 6:case"end":return e.stop()}},e,this)})),function(e){return s.apply(this,arguments)})},a.page={onCommentClick:function(e){var t,n,r=e.rootId,o=e.parId,c=e.niname;o?(t="回复".concat(c,"："),n=function(e){return a.do.comment({rootId:r,parId:o,con:e})}):(t="回复：",n=function(e){return a.do.comment({con:e})}),a.page.showFixedTextarea({placeholder:t,onSubmit:n})},showFixedTextarea:function(e){return a.setState(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){G(e,t,a[t])})}return e}({},e,{show:!0}),"_fixedTextarea")},hideFixedTextarea:function(){return a.setState({show:!1},"_fixedTextarea")},showReward:function(){return a.setState({show:!0},"_reward")},hideReward:function(){return a.setState({show:!1},"_reward")}},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&q(e,t)}(t,M["a"]),t}(),H=C.prototype,K="state",Q=[F.k],U={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.initState({_fixedTextarea:{show:!1,placeholder:"",onSubmit:Function.prototype},_reward:{show:!1},detail:{},list:Y.a.__EMPTY__,random:Y.a.__EMPTY__,comment:Y.a.__EMPTY__,reward:Y.a.__EMPTY__})}},W={},Object.keys(U).forEach(function(e){W[e]=U[e]}),W.enumerable=!!W.enumerable,W.configurable=!!W.configurable,("value"in W||W.initializer)&&(W.writable=!0),W=Q.slice().reverse().reduce(function(e,t){return t(H,K,e)||e},W),V&&void 0!==W.initializer&&(W.value=W.initializer?W.initializer.call(V):void 0,W.initializer=void 0),void 0===W.initializer&&(Object.defineProperty(H,K,W),W=null),k=W,C);function ne(e){return(ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function re(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function oe(e,t){return!t||"object"!==ne(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ce(e){return(ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ie(e,t){return(ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var le=Object(i.c)(ae)(Z=Object(i.d)((te=ee=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),oe(this,ce(t).apply(this,arguments))}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ie(e,t)}(t,r.a.Component),a=t,(n=[{key:"render",value:function(){return r.a.createElement(l.k,{title:"观看视频"},r.a.createElement(O,null),r.a.createElement(z,null),r.a.createElement(_,{className:"mt-d"}),r.a.createElement(E,{className:"mt-d"}),r.a.createElement(d,{className:"mt-d"}),r.a.createElement(h,null),r.a.createElement(v,null))}}])&&re(a.prototype,n),o&&re(a,o),t}(),ee.contextTypes={$:c.a.object},Z=te))||Z)||Z;t.default=le}},[[944,1,0]]]);