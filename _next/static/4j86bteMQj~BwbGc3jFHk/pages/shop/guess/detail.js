(window.webpackJsonp=window.webpackJsonp||[]).push([[118],{931:function(e,t,a){__NEXT_REGISTER_PAGE("/shop/guess/detail",function(){return e.exports=a(961),{page:e.exports.default}})},961:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),i=a(5),s=a(10),c=a(0),l=a(2),o=a.n(l),m=a(6),u=a.n(m),d=a(8),p=a.n(d),y=a(3),f=a(4),g=function(e,t){var a=t.$,n=e.className,i=a.getState("_imgView"),s=i.show,l=i.index,m=a.getState("detail").image,u=String(void 0===m?"":m).split(",").filter(function(e){return""!==e}).map(function(e){return f.a.getAppImgUrl(e,"scale")});return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.d,{className:p()("style-442334",n,"".concat("style-442334","__carousel")),height:"4.8rem",data:u.map(function(e){return{src:e}}),onImgClick:a.page.showImgView}),!!u.length&&r.a.createElement(y.r,{show:s,data:u,current:l,hideOrigin:!0,onClose:a.page.hideImgView}),r.a.createElement(o.a,{styleId:"495361505",css:".".concat("style-442334","__carousel{display:inline-block;width:4.8rem;height:4.8rem;background-color:").concat(c.a.color_bg,";border:0.12rem solid ").concat(c.a.color_theme,";border-radius:0.06rem;box-shadow:0 0.08rem 0.26rem 0 rgba(20,62,109,0.5);overflow:hidden;}"),dynamic:["style-442334",c.a.color_bg,c.a.color_theme]}))};g.contextTypes={$:u.a.object};var h=Object(i.d)(g),b=f.a.cdn("/static/images/src/shop/guess/Detail"),v=[{label:"积分",value:"1"},{label:"金币",value:"2"}],E=[{label:"灵动积分",value:"1"},{label:"本汀积分",value:"2"}],w=function(e,t){var a=t.$,n=e.className,i=a.getState("detail"),s=i.endTime,c=i.totalNum,l=void 0===c?"-":c,m=i.partNum,u=void 0===m?"-":m,d=i.perPrice,g=i.guessType,E=i._loaded,w=f.a.getLabel(v,g);return r.a.createElement("div",{className:o.a.dynamic([["3430408491",["style-154659","style-154659","style-154659"]],["2990368070",[b]]])+" "+(p()("style-154659",n,"t-c")||"")},r.a.createElement("div",{className:o.a.dynamic([["3430408491",["style-154659","style-154659","style-154659"]],["2990368070",[b]]])+" bg"},r.a.createElement("div",{className:o.a.dynamic([["3430408491",["style-154659","style-154659","style-154659"]],["2990368070",[b]]])+" time"},E&&r.a.createElement(r.a.Fragment,null,a.isEnd?r.a.createElement("p",{className:o.a.dynamic([["3430408491",["style-154659","style-154659","style-154659"]],["2990368070",[b]]])+" t-24 l-34 t-c t-void"},"竞猜已结束"):r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:o.a.dynamic([["3430408491",["style-154659","style-154659","style-154659"]],["2990368070",[b]]])+" t-24 l-34 t-c t-void"},"距离结束还有"),r.a.createElement(y.f,{className:"".concat("style-154659","__count-down mt-24"),beginTime:s})))),r.a.createElement(h,{className:"mt-40"}),r.a.createElement("p",{className:o.a.dynamic([["3430408491",["style-154659","style-154659","style-154659"]],["2990368070",[b]]])+" t-24 l-34 t-void mt-32"},r.a.createElement("span",{className:o.a.dynamic([["3430408491",["style-154659","style-154659","style-154659"]],["2990368070",[b]]])},"已有"),r.a.createElement("span",{className:o.a.dynamic([["3430408491",["style-154659","style-154659","style-154659"]],["2990368070",[b]]])+" ml-xs mr-xs"},l),r.a.createElement("span",{className:o.a.dynamic([["3430408491",["style-154659","style-154659","style-154659"]],["2990368070",[b]]])},"人参与，每人最多参与"),r.a.createElement("span",{className:o.a.dynamic([["3430408491",["style-154659","style-154659","style-154659"]],["2990368070",[b]]])+" t-event ml-xs mr-xs"},u),r.a.createElement("span",{className:o.a.dynamic([["3430408491",["style-154659","style-154659","style-154659"]],["2990368070",[b]]])},"次")),E&&r.a.createElement(y.c,{className:"mt-32",type:"event",disabled:a.isEnd,onClick:function(){return f.a.checkLogin(a.page.guess)}},a.isEnd?"竞猜结束":"支付 ".concat(d," ").concat(w," 立即竞猜"))),r.a.createElement(o.a,{styleId:"3430408491",css:".".concat("style-154659","__count-down{display:inline-block;}.").concat("style-154659","__count-down .item{display:inline-block;width:auto !important;height:auto !important;padding:0.24rem 0.18rem !important;line-height:0.66rem !important;font-size:0.48rem !important;font-weight:bold;border-radius:0.06rem !important;}.").concat("style-154659","__count-down .split{margin:0 0.08rem !important;font-size:0.48rem !important;}"),dynamic:["style-154659","style-154659","style-154659"]}),r.a.createElement(o.a,{styleId:"2990368070",css:".style-154659.__jsx-style-dynamic-selector{position:relative;margin-top:-1rem;background:linear-gradient( 90deg, rgba(34,236,164,1) 0%, rgba(0,219,166,1) 100% );}.bg.__jsx-style-dynamic-selector{min-height:9.24rem;padding:1.4rem 0.8rem 0.4rem;background-image:url(".concat(b,"/bg.png);background-repeat:no-repeat;background-size:initial;background-position:bottom right;}.time.__jsx-style-dynamic-selector{min-height:0.34rem;}"),dynamic:[b]}))};w.contextTypes={$:u.a.object};var _=Object(i.d)(w);function N(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var S=function(e,t){var a=t.$,n=e.className,i=a.getState("detail"),c=i.rules,l=void 0===c?"":c,o=i.panUrl,m=i.key,u=l.split("\n");return r.a.createElement(s.o,{className:p()("style-124195",n),title:"规则",showNum:!0,content:o?N(u).concat([r.a.createElement("div",null,r.a.createElement("p",{className:"t-28"},"鱼获重量压缩包已上传至百度，链接："),r.a.createElement("a",{className:"t-28 t-primary",href:o,style:{textDecoration:"underline"}},o),r.a.createElement("p",{className:"t-28"},r.a.createElement("span",null,"解压密码："),r.a.createElement("span",{className:"user-select"},m||"猜渔结束后将自动显示解压密码")))]):u})};S.contextTypes={$:u.a.object};var x=Object(i.d)(S),I=function(e,t){var a=t.$,n=e.userId,i=e.face,c=e.nickName,l=e.vip,o=e.createTime,m=e.information;return r.a.createElement(y.u.Item,{thumb:r.a.createElement(s.c,{userId:n,img:i,vip:l})},r.a.createElement(y.l,null,r.a.createElement(y.l.Item,null,r.a.createElement("p",{className:"t-30 l-44"},c),r.a.createElement("p",{className:"t-24 l-36 t-sub"},f.a.date("m-d H:i:s",o))),r.a.createElement("p",{className:"t-30 l-44 t-primary t-b"},m,"斤"),!a.isEnd&&r.a.createElement(y.c,{className:"ml-sm",type:"primary",size:"sm",inline:!0,radius:!0,onClick:function(){return f.a.checkLogin(function(){return a.page.guess(m)})}},"跟猜")))};I.contextTypes={$:u.a.object};var j=Object(i.d)(I),T=function(e,t){var a=t.$,n=e.className,i=a.getState("winner");return i.list.length?r.a.createElement("div",{className:p()("style-171763",n)},r.a.createElement(s.i,{title:"中奖名单",desc:r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,"共有"),r.a.createElement("span",{className:"t-danger ml-xs mr-xs"},i.pageinfo&&i.pageinfo.recordtotal||"-"),r.a.createElement("span",null,"人竞猜成功")),isList:!0}),r.a.createElement(y.v,{data:i,renderRow:function(e){return r.a.createElement(j,e)},hideFooter:!0,onEndReached:a.fetch.winner})):null};T.contextTypes={$:u.a.object};var k=Object(i.d)(T),O=function(e,t){var a=t.$,n=e.className,i=a.getState().isMy,c=a.getState("record");return r.a.createElement("div",{className:p()("style-108990",n)},r.a.createElement(s.i,{title:"竞猜记录",desc:r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,"已有"),r.a.createElement("span",{className:"t-danger ml-xs mr-xs"},c.pageinfo&&c.pageinfo.recordtotal||"-"),r.a.createElement("span",null,"人次出价")),extra:r.a.createElement("span",{className:"t-32 l-48 t-sub",onClick:function(){return f.a.checkLogin(a.page.switchGuessList)}},i?"全部":"我的"),isList:!0}),r.a.createElement(y.v,{data:c,renderRow:function(e){return r.a.createElement(j,e)},onEndReached:a.fetch.record}))};O.contextTypes={$:u.a.object};var P=Object(i.d)(O),C=function(e,t){var a=t.$;if(a.isEnd)return null;var n,i=a.getState("_payConfirm").show,s=a.getState("detail"),c=s.guessType,l=s.dataType,o=s.perPrice,m=f.a.getLabel(v,c);if("金币"===m)n="coin";else if("积分"===m){var u=f.a.getLabel(E,l);"灵动积分"===u?n="nido":"本汀积分"===u&&(n="bt")}return r.a.createElement(y.y,{show:i,type:n,amount:o,onClose:a.page.hidePayConfirm,onConfirm:a.do.guess})};C.contextTypes={$:u.a.object};var $,z,L=Object(i.d)(C),A=a(9),M=a.n(A),V=a(11),R=a(12),F=a(15),G=a(7),J=a(13);function U(e){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t,a,n,r,i,s){try{var c=e[i](s),l=c.value}catch(e){return void a(e)}c.done?t(l):Promise.resolve(l).then(n,r)}function Y(e){return function(){var t=this,a=arguments;return new Promise(function(n,r){var i=e.apply(t,a);function s(e){D(i,n,r,s,c,"next",e)}function c(e){D(i,n,r,s,c,"throw",e)}s(void 0)})}}function H(e){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function X(e,t){return(X=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var B,K,Q,W,Z,ee,te=($=function(e){function t(){var e,a,n,r,i,s,c,l,o,m,u;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var d=arguments.length,p=new Array(d),y=0;y<d;y++)p[y]=arguments[y];return n=this,r=(e=H(t)).call.apply(e,[this].concat(p)),a=!r||"object"!==U(r)&&"function"!=typeof r?q(n):r,i=a,s="state",c=z,l=q(q(a)),c&&Object.defineProperty(i,s,{enumerable:c.enumerable,configurable:c.configurable,writable:c.writable,value:c.initializer?c.initializer.call(l):void 0}),a.fetch={config:{static:["userInfo"],one:["detail"],update:["record"]},userInfo:(m=Y(M.a.mark(function e(){var t;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=J.a.fetchUserInfo(),e.t0=a,e.next=4,t;case 4:return e.t1=e.sent,e.t0.setState.call(e.t0,e.t1,"userInfo"),e.abrupt("return",t);case 7:case"end":return e.stop()}},e,this)})),function(){return m.apply(this,arguments)}),detail:(o=Y(M.a.mark(function e(){var t,n;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.params.params.id,n=a.fetchThenSetState("get_new_guess-everday_detail","detail",{guessId:t}),e.next=4,n;case 4:return e.sent.key&&a.fetch.winner(!0),e.abrupt("return",n);case 7:case"end":return e.stop()}},e,this)})),function(){return o.apply(this,arguments)}),record:function(e){var t,n=a.params.params.id;a.getState().isMy?t={guessId:n,_:{search:{userId:a.getState("userInfo").userId}}}:t={guessId:n};return a.fetchListThenSetState("get_guss-everday_guessing-list","record",t,e,"createTime")},winner:function(e){var t=a.params.params.id;return a.fetchListThenSetState("get_guss-everday_guessing-list","winner",{guessId:t,_:{limit:G.a.__LIMIT__,order:{createTime:"asc"},search:{state:2}}},e)},time:function(){return a.fetchThenSetState("get_time","time")}},a.computed={isEnd:function(){var e=a.getState("detail"),t=e.endTime;return!e._loaded||f.a.getTimestamp()>t}},a.do={guess:(u=Y(M.a.mark(function e(){var t,n,r;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.params.params.id,n=a.getState("_payConfirm"),r=n.value,e.next=4,F.a.P("do_guess-everday_guessing",{guessId:t,information:r});case 4:f.a.light("竞猜成功"),a.page.hidePayConfirm(),a.fetch.record(!0);case 7:case"end":return e.stop()}},e,this)})),function(){return u.apply(this,arguments)})},a.page={showImgView:function(e){return a.setState({show:!0,index:e},"_imgView")},hideImgView:function(){return a.setState({show:!1},"_imgView")},showPayConfirm:function(e){/^\d+(?:\.\d{1})?$/.test(e)?a.setState({show:!0,value:e},"_payConfirm"):f.a.light("输入重量格式错误")},hidePayConfirm:function(){return a.setState({show:!1,value:""},"_payConfirm")},guess:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return f.a.onPrompt("欢乐猜鱼",a.page.showPayConfirm,e,"输入您要猜的重量")},switchGuessList:function(){var e=a.getState().isMy;a.setState({isMy:!e}),a.fetch.record(!0)}},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&X(e,t)}(t,R["a"]),t}(),B=$.prototype,K="state",Q=[V.k],W={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.initState({_payConfirm:{show:!1,value:""},_imgView:{show:!1,index:0},state:{isMy:!1},userInfo:J.a.toJS("userInfo"),detail:{},record:G.a.__EMPTY__,winner:G.a.__EMPTY__})}},ee={},Object.keys(W).forEach(function(e){ee[e]=W[e]}),ee.enumerable=!!ee.enumerable,ee.configurable=!!ee.configurable,("value"in ee||ee.initializer)&&(ee.writable=!0),ee=Q.slice().reverse().reduce(function(e,t){return t(B,K,e)||e},ee),Z&&void 0!==ee.initializer&&(ee.value=ee.initializer?ee.initializer.call(Z):void 0,ee.initializer=void 0),void 0===ee.initializer&&(Object.defineProperty(B,K,ee),ee=null),z=ee,$),ae=Object(i.c)(te)(function(){return r.a.createElement(s.k,{title:"欢乐猜鱼",bd:null,headerStyle:{color:c.a.color_theme,background:"transparent"}},r.a.createElement(_,null),r.a.createElement(x,null),r.a.createElement(k,{className:"mt-d"}),r.a.createElement(P,{className:"mt-d"}),r.a.createElement(L,null))});t.default=ae}},[[931,1,0]]]);