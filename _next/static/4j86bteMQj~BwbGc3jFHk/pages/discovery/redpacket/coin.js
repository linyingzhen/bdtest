(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{1009:function(e,t,n){"use strict";n.r(t);var r,a,o=n(2),i=n.n(o),c=n(1),u=n.n(c),l=n(6),s=n.n(l),f=n(5),p=n(3),b=n(10),m=n(4),y=n(8),d=n.n(y),w=n(9),h=n.n(w),v=n(11),g=n(12),O=n(15);function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){j(e,t,n[t])})}return e}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(e,t,n,r,a,o,i){try{var c=e[o](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,a)}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var z,N,C,I,R,F,$=(r=function(e){function t(){var e,n,r,o,i,c,u,l,s,f;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var p=arguments.length,b=new Array(p),y=0;y<p;y++)b[y]=arguments[y];return r=this,o=(e=P(t)).call.apply(e,[this].concat(b)),n=!o||"object"!==S(o)&&"function"!=typeof o?k(r):o,i=n,c="state",u=a,l=k(k(n)),u&&Object.defineProperty(i,c,{enumerable:u.enumerable,configurable:u.configurable,writable:u.writable,value:u.initializer?u.initializer.call(l):void 0}),n.fetch={config:{}},n.do={doAddReward:(s=h.a.mark(function e(t){var r,a,o,i;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.amount,a=t.total,o=n.getState("state"),!(1===(i=o.redPriceType)&&r/a<1)){e.next=5;break}return m.a.light("单个红包金币不可低于1个"),e.abrupt("return",!1);case 5:if(!(2===i&&r*a<10)){e.next=8;break}return m.a.light("红包总金币不可低于10个"),e.abrupt("return",!1);case 8:return e.next=10,O.a.P("do_redpacket_send",_({redPriceType:i,redType:1},t));case 10:return"发布成功"==e.sent.info?(m.a.light("金币红包发布成功"),window.Stores["/discovery"]&&window.Stores["/discovery"].setRefresh(),m.a.router.push("/discovery")):m.a.router.push("/person/wallet/coin/exchange"),e.abrupt("return",!0);case 13:case"end":return e.stop()}},e,this)}),f=function(){var e=this,t=arguments;return new Promise(function(n,r){var a=s.apply(e,t);function o(e){x(a,n,r,o,i,"next",e)}function i(e){x(a,n,r,o,i,"throw",e)}o(void 0)})},function(e){return f.apply(this,arguments)})},n.page={onTabClick:function(e,t){n.setState({page:t},"_affixTabs"),m.a.scrollTo(0);var r=n.getState("_affixTabs").page;n.setState({redPriceType:1===r?2:1})}},n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(t,g["a"]),n=t,(r=[{key:"storeInit",value:function(){var e=this.params.params.id;1==e&&this.setState({page:e},"_affixTabs")}}])&&E(n.prototype,r),o&&E(n,o),t}(),z=r.prototype,N="state",C=[v.k],I={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.initState({_affixTabs:{page:0},state:{redPriceType:1,show:!1,_filter:!0}})}},F={},Object.keys(I).forEach(function(e){F[e]=I[e]}),F.enumerable=!!F.enumerable,F.configurable=!!F.configurable,("value"in F||F.initializer)&&(F.writable=!0),F=C.slice().reverse().reduce(function(e,t){return t(z,N,e)||e},F),R&&void 0!==F.initializer&&(F.value=F.initializer?F.initializer.call(R):void 0,F.initializer=void 0),void 0===F.initializer&&(Object.defineProperty(z,N,F),F=null),a=F,r),A=[{title:"拼手气"},{title:"固定金币"}],V=n(39),q=n.n(V),D=n(7),G=n(0),J=function(e,t){var n=t.$,r=e.form,a=e.label,o=e.onSubmit,c=r.getFieldValue("amount"),l=r.getFieldValue("total"),s=r.getFieldValue("title");s=m.a.trim(s);var f="发红包",b=!0,y="";return 1===n.getState("state").redPriceType?(c>=10&&l>=1&&""!=s&&c/l>=1&&c/l<=2e3&&(b=!1,f="发红包(总金币".concat(c,"个)")),(c/l<1||c/l>2e3)&&(y="单个红包金币不可低于1个高于2000个"),c<10&&(y="红包总金币不可小于10个")):(c>=1&&c<=2e3&&""!=s&&c*l>=10&&(b=!1,f="发红包(总金币".concat(c*l,"个)")),(c<1||c>2e3)&&(y="单个红包金币不可低于1个高于2000个"),c*l<10&&(y="红包总金币不可小于10个")),u.a.createElement(p.m,{form:r},u.a.createElement(p.m.Input,{className:"mt-sm number",label:a,type:"phone",name:"amount",placeholder:"请输入数量",extra:"个",maxLength:7,option:D.a.rules.required}),u.a.createElement(p.m.Input,{className:"number",label:"红包个数",name:"total",type:"phone",placeholder:"请输入数量",extra:"个",maxLength:3,option:D.a.rules.required}),u.a.createElement("div",{className:i.a.dynamic([["1277782052",[G.a.space,G.a.wind]],["753922848",[G.a.space,G.a.wind,G.a.wind]]])+" t-32 mt-12 ml-32"},"祝福语"),u.a.createElement(p.m.Textarea,{className:"mt-sm",name:"title",initialValue:"大鲫大鲤，渔获多多",count:200,option:D.a.rules.required}),u.a.createElement("div",{className:i.a.dynamic([["1277782052",[G.a.space,G.a.wind]],["753922848",[G.a.space,G.a.wind,G.a.wind]]])+" no t-24"},y),u.a.createElement(q.a,{type:"warning",className:"m-w",onClick:function(){return m.a.onConfirm("确认发布金币红包？",function(){return o(r,n.do.doAddReward)})},disabled:b},f),u.a.createElement(i.a,{styleId:"1277782052",css:".m-w{margin:".concat(G.a.space," ").concat(G.a.wind,";}"),dynamic:[G.a.space,G.a.wind]}),u.a.createElement(i.a,{styleId:"753922848",css:".no.__jsx-style-dynamic-selector{height:0.64rem;color:#d74e59;padding:".concat(G.a.space," ").concat(G.a.wind," 0 ").concat(G.a.wind,";}"),dynamic:[G.a.space,G.a.wind,G.a.wind]}))};J.contextTypes={$:s.a.object};var L,M,Q,X=Object(f.d)(J);function B(e){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function K(e,t){return!t||"object"!==B(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function U(e){return(U=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function W(e,t){return(W=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Y=Object(f.c)($)(L=Object(f.a)(L=Object(f.d)((Q=M=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),K(this,U(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&W(e,t)}(t,u.a.Component),n=t,(r=[{key:"componentDidMount",value:function(){"scan"===m.a.getQuery("type")&&this.context.$.page.openScan()}},{key:"render",value:function(){var e=this.props.className,t=this.context.$,n=this.props,r=n.form,a=n.onSubmit,o=t.getState("_affixTabs").page;return u.a.createElement(b.k,{title:"金币红包",className:d()("style-201810111452",e)},u.a.createElement(p.a,{tabs:A,align:"center",animated:!0,destroyInactiveTab:!1,page:o,onTabClick:t.page.onTabClick},u.a.createElement(X,{form:r,onSubmit:a,label:"总金币"}),u.a.createElement(X,{form:r,onSubmit:a,label:"单个金币"})),u.a.createElement(i.a,{styleId:"1812740238",css:".style-201810111452 .am-list-item .am-input-extra{color:#FF4242;}.style-201810111452 .c-tabs .am-tabs-default-bar-tab{word-break:keep-all;}"}))}}])&&H(n.prototype,r),a&&H(n,a),t}(),M.contextTypes={$:s.a.object},L=Q))||L)||L)||L;t.default=Y},833:function(e,t,n){__NEXT_REGISTER_PAGE("/discovery/redpacket/coin",function(){return e.exports=n(1009),{page:e.exports.default}})}},[[833,1,0]]]);