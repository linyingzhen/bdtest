(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{180:function(e,t,a){"use strict";var r,n,o,i=a(2),c=a.n(i),s=a(1),l=a.n(s),u=a(6),m=a.n(u),d=a(8),p=a.n(d),f=a(5),y=a(3),b=a(4),g=a(14),h=a.n(g),v=a(7),_="style-397295",x=function(e){var t=e.data,a=void 0===t?[]:t,r=e.max,n=void 0===r?9:r,o=e.onImgClick,i=e.className;if(1===a.length){var s=b.a.getAppImgUrl(a[0].src,"scale");return l.a.createElement(y.q,{className:p()(_,i),src:s,lazyload:!0,animate:!0,onClick:function(){return o(0)}},l.a.createElement("img",{src:s,alt:"",className:"jsx-186250477"}),l.a.createElement(c.a,{styleId:"868442853",css:".style-397295{position:relative;background-size:contain;background-position:top left;background-repeat:no-repeat;}"}),l.a.createElement(c.a,{styleId:"455188225",css:"img.jsx-186250477{width:100% !important;height:initial !important;max-width:57.5vw;max-height:100vw;visibility:hidden;}"}))}var u=a;return 4===u.length&&(u=a.length>=n?a:[a[0],a[1],{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAA1BMVEX///+nxBvIAAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",transparent:!0},a[2],a[3]]),l.a.createElement(h.a,{className:p()(_,i),wrap:"wrap"},u.filter(function(e,t){return t<n}).map(function(e,t){return l.a.createElement(y.q,{key:e.src,className:"".concat(_,"__img"),src:e.src,transparent:e.transparent,lazyload:!0,animate:!0,onClick:function(){if(4===a.length){if(2===t)return;o(t<2?t:t-1)}else o(t)}},b.a.isPoster(e.src)&&l.a.createElement("img",{src:"".concat(v.a.__IMG__,"/play").concat(v.a.__IMG_DPR__,".png"),alt:"",className:"jsx-2392059587 "+c.a.dynamic([["3081852352",[_,_,_,_,_]]])}))}),l.a.createElement(c.a,{styleId:"3081852352",css:".".concat(_,"__img{width:32.66666%;height:auto;padding-bottom:32.66666%;margin-top:1%;margin-right:1%;}.").concat(_,"__img:nth-of-type(1){margin-top:0 !important;}.").concat(_,"__img:nth-of-type(2){margin-top:0 !important;}.").concat(_,"__img:nth-of-type(3){margin-top:0 !important;}.").concat(_,"__img:nth-of-type(3n){margin-right:0 !important;}"),dynamic:[_,_,_,_,_]}),l.a.createElement(c.a,{styleId:"2392059587",css:"img.jsx-2392059587{position:absolute;top:48%;left:50%;width:0.96rem !important;height:0.96rem !important;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);opacity:0.8;}"}))},w=a(43);function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(){return(I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function E(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t){return!t||"object"!==k(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}a.d(t,"a",function(){return S});var S=Object(f.d)((o=n=function(e){function t(){var e,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=O(this,(e=j(t)).call.apply(e,[this].concat(n)))).state={renderImgView:!1,dataImgView:[],show:!1,current:0},a}var a,r,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(t,l.a.Component),a=t,(r=[{key:"renderVideo",value:function(){var e=this.props,t=e.content,a=e.files,r=e.params,n=void 0===r?{}:r;return l.a.createElement(y.G,I({className:p()({"mt-18":!!t}),src:a.length&&a[0].filePath,poster:a.length?a[0].sfPath:void 0,fileSize:a.length&&a[0].fileSize,playSecond:a.length&&a[0].playSeconds,onClick:function(e){return e.preventDefault()}},n.video))}},{key:"renderImgs",value:function(){var e=this,t=this.props,a=t.content,r=t.files,n=void 0===r?[]:r,o=t.infoId,i=t.params,c=void 0===i?{}:i;return o?l.a.createElement(x,I({className:p()({"mt-18":!!a}),data:n.map(function(e){return{src:e.fileId||e.filePath}}),onImgClick:function(t){return e.setState({renderImgView:!0,dataImgView:n,show:!0,current:t})}},c.image)):l.a.createElement(y.d,{className:p()({"mt-18":!!a}),data:n.map(function(e){return{src:e.filePath}}),height:"100vw",autoplay:!1,style:{backgroundSize:"contain"},onImgClick:function(t){return e.setState({renderImgView:!0,dataImgView:n,show:!0,current:t})}})}},{key:"renderRedPacket",value:function(){var e,t=this.context.$,a=this.props,r=a.infoId,n=a.red,o=void 0===n?{}:n,i=a.redRecordsOpen,s=o.amount,u=o.getAmount,m=o.getNum,d=void 0===m?0:m,p=o.num,f=o.packetId,g=o.redPacketLogs,h=void 0===g?[]:g,v=o.redType,_=o.state,x=3==v,k=2==_,I="",E=u,O=s;switch(parseInt(v)){case 1:e="金币",I="枚",E=parseInt(u),O=parseInt(O);break;case 2:I="积分",E=parseInt(u),O=parseInt(O);break;case 3:I="元";break;case 4:e="优惠券",I="元"}var j,N=0,S=0;if(k){h.forEach(function(e){parseFloat(e.amount)>N&&(N=parseFloat(e.amount))});var P=h.map(function(e){return e.createTime}).sort(function(e,t){return e-t});S=P[P.length-1]-P[0]||1}return j="".concat(w.a,x?k?"/red-user-none.png":"/red-user.png":k?"/red-none.png":"/red.png"),l.a.createElement("div",{className:"jsx-3072411719 mt-d"},l.a.createElement("div",{style:{position:"relative",display:"inline-block"},className:"jsx-3072411719"},l.a.createElement("img",{src:j,onClick:function(){return b.a.checkLogin(function(){return t.do.redClick(f,v,r)})},alt:"",className:"jsx-3072411719 "+((x?"img-red-user":"img-red")||"")}),x?l.a.createElement("span",{className:"jsx-3072411719 p-red-user-text t-b"},"现金红包"):l.a.createElement("span",{className:"jsx-3072411719 p-red-text t-b"},e||I,"红包")),!isNaN(O)&&l.a.createElement("p",{className:"jsx-3072411719 t-24 l-34 mt-24"},l.a.createElement(y.p,{className:"t-24",type:"redpacket"}),l.a.createElement("span",{className:"jsx-3072411719 ml-16"},"已领取"),l.a.createElement("span",{className:"jsx-3072411719 t-danger ml-4"},d,"/",p),l.a.createElement("span",{className:"jsx-3072411719 ml-4"},"个，"),l.a.createElement("span",{className:"jsx-3072411719 t-danger"},E,"/",O),l.a.createElement("span",{className:"jsx-3072411719 ml-4"},I),!!S&&l.a.createElement("span",{className:"jsx-3072411719"},"，",S,"秒抢光")),!!h.length&&l.a.createElement("div",{className:"jsx-3072411719 logs"},h.filter(function(e,t){return i||t<10}).map(function(e){return l.a.createElement("p",{key:e.userId,className:"jsx-3072411719 t-24 l-34 mt-8"},l.a.createElement(y.t,{className:"t-primary",href:"/person/zone?id=".concat(e.userId),as:"/person/zone/".concat(e.userId)},e.niname),l.a.createElement("span",{className:"jsx-3072411719 t-sub ml-4"},"抢到"),l.a.createElement("span",{className:"jsx-3072411719 t-primary ml-4"},"元"===I?e.amount:parseInt(e.amount)),l.a.createElement("span",{className:"jsx-3072411719 t-sub ml-4"},I,"。"),!!N&&N===parseFloat(e.amount)&&l.a.createElement("img",{src:"".concat(w.a,"/best.png"),alt:"",className:"jsx-3072411719 img-best"}))}),!i&&h.length>10&&l.a.createElement("p",{onClick:function(){return t.page.onRedLogsOpen(r)},className:"jsx-3072411719 t-24 l-34 mt-8"},l.a.createElement("span",{className:"jsx-3072411719 t-sub"},"展开"),l.a.createElement(y.p,{className:"t-24 l-34 t-sub ml-4",type:"down"}))),l.a.createElement(c.a,{styleId:"3072411719",css:".img-red-user.jsx-3072411719{width:3.87rem;height:5.05rem;}.img-red.jsx-3072411719{width:6rem;max-width:100%;height:initial;}.p-red-text.jsx-3072411719{position:absolute;top:62%;left:50%;color:#ffd265;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);text-shadow:0.04rem 0.04rem 0.04rem rgba(0,0,0,0.16);}.p-red-user-text.jsx-3072411719{position:absolute;top:53%;left:1.93rem;color:#ffd265;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);text-shadow:0.04rem 0.04rem 0.04rem rgba(0,0,0,0.16);}.logs.jsx-3072411719{padding-left:0.4rem;}.img-best.jsx-3072411719{width:0.92rem;height:0.53rem;margin-top:-0.14rem;}"}))}},{key:"render",value:function(){var e,t=this,a=this.props,r=a.atList,n=a.content,o=a.infoId,i=a.params,c=void 0===i?{}:i,s=a.type,u=a.className,m=this.state,d=m.renderImgView,f=m.dataImgView,g=m.show,h=m.current;switch(parseInt(s)){case 1:e=this.renderVideo();break;case 2:e=this.renderImgs();break;case 10:case 11:case 12:case 13:e=this.renderRedPacket()}return l.a.createElement("div",{className:p()("style-100916",u)},n&&l.a.createElement(y.e,I({className:"t-34 l-48 ls-o1 user-select",atList:r,onClick:function(e){o&&(e.stopPropagation(),b.a.router.push("/discovery/detail?id=".concat(o),"/discovery/detail/".concat(o)))}},c.article),n),e,d&&l.a.createElement(y.r,{show:g,current:h,data:f.map(function(e){return-1!==e.filePath.indexOf(".gif")?b.a.getImgUrl(e.filePath):b.a.getAppImgUrl(e.filePath,"scale")}),onClose:function(){return t.setState({renderImgView:!1,dataImgView:[],show:!1})}}))}}])&&E(a.prototype,r),n&&E(a,n),t}(),n.contextTypes={$:m.a.object},r=o))||r},28:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=m(a(16)),n=m(a(21)),o=m(a(18)),i=m(a(19)),c=m(a(17)),s=m(a(20)),l=m(a(8)),u=m(a(1));function m(e){return e&&e.__esModule?e:{default:e}}var d=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&(a[r[n]]=e[r[n]])}return a},p=function(e){function t(){return(0,o.default)(this,t),(0,c.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,i.default)(t,[{key:"render",value:function(){var e,t,a=this.props,o=a.className,i=a.prefixCls,c=a.children,s=a.text,m=a.size,p=a.overflowCount,f=a.dot,y=a.corner,b=a.hot,g=d(a,["className","prefixCls","children","text","size","overflowCount","dot","corner","hot"]);p=p,s="number"==typeof s&&s>p?p+"+":s,f&&(s="");var h=(0,l.default)((e={},(0,n.default)(e,i+"-dot",f),(0,n.default)(e,i+"-dot-large",f&&"large"===m),(0,n.default)(e,i+"-text",!f&&!y),(0,n.default)(e,i+"-corner",y),(0,n.default)(e,i+"-corner-large",y&&"large"===m),e)),v=(0,l.default)(i,o,(t={},(0,n.default)(t,i+"-not-a-wrapper",!c),(0,n.default)(t,i+"-corner-wrapper",y),(0,n.default)(t,i+"-hot",!!b),(0,n.default)(t,i+"-corner-wrapper-large",y&&"large"===m),t));return u.default.createElement("span",{className:v},c,(s||f)&&u.default.createElement("sup",(0,r.default)({className:h},g),s))}}]),t}(u.default.Component);t.default=p,p.defaultProps={prefixCls:"am-badge",size:"small",overflowCount:99,dot:!1,corner:!1},e.exports=t.default},43:function(e,t,a){"use strict";a.d(t,"a",function(){return r}),a.d(t,"b",function(){return n});var r=a(4).a.cdn("/static/images/src/discovery/Index"),n=[{title:"最新"},{title:"精选"},{title:"渔获"},{title:"好友"}]},830:function(e,t,a){__NEXT_REGISTER_PAGE("/discovery",function(){return e.exports=a(971),{page:e.exports.default}})},971:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),o=a(6),i=a.n(o),c=a(5),s=a(10),l=a(24),u=a(28),m=a.n(u),d=a(3),p=a(4),f=a(13),y=a(43),b=function(e,t){var a=t.$,r=f.a.getState("discoverySpecial"),o=r.count,i=r.isRead,c=a.getState("_affixTabs").page,s=p.a.deepCopy(y.b);if(!i&&o){var l=s.findIndex(function(e){return"精选"===e.title});s[l]={title:n.a.createElement(m.a,{dot:!0},"精选")}}return n.a.createElement(d.o,{show:!0,style:{height:"0.9rem"}},n.a.createElement(d.D,{tabs:s,page:c,extra:n.a.createElement(d.c,{type:"primary",size:"xs",inline:!0,ghost:!0,onClick:function(){return p.a.checkLogin(function(){return p.a.router.push("/discovery/post")})}},"发布"),onTabClick:a.page.onTabClick},n.a.createElement("div",null)))};b.contextTypes={$:i.a.object};var g=Object(c.d)(b),h=a(8),v=a.n(h),_=a(23),x=a.n(_),w=a(14),k=a.n(w),I=a(2),E=a.n(I),O=a(180),j=function(e,t){var a=t.$,r=e.infoId,o=e.liked,i=e.date,c=e.className;return n.a.createElement(k.a,{className:c},n.a.createElement(k.a.Item,null,n.a.createElement("span",{className:"t-24 l-34 t-sub ls-o1"},p.a.lastDate(i))),n.a.createElement(d.p,{className:v()("t-26",{"t-primary":o,"t-icon":!o}),type:"like-fill",onClick:function(){return p.a.checkLogin(function(){return a.do.toggleLike(r)})}}),n.a.createElement(d.p,{className:"t-28 t-icon ml-42",type:"comment-fill",onClick:function(){return p.a.checkLogin(function(){return a.page.onCommentClick({infoId:r})})}}))};j.contextTypes={$:i.a.object};var N=Object(c.d)(j),S=a(0);function P(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var T=function(e,t){var a=t.$,r=e.id,o=e.infoId,i=e.commentList,c=void 0===i?[]:i,s=e.likeData,l=void 0===s?[]:s,u=e.likeRecordsOpen,m=e.max,f=void 0===m?5:m,y=e.total,b=void 0===y?0:y,g=e.className;if(!l.length&&!c.length)return null;var h=c.map(function(e){return{tbId:e.tbId,parId:e.parId,userId:e.userId,name:e.niname,parUserId:e.parUserId,parNiname:e.parNiname,text:e.con}}),_=!!l.length&&!!h.length;return n.a.createElement("div",{className:E.a.dynamic([["481084198",[S.a.color_bg,S.a.radius_xs,S.a.border,S.a.radius_xs]]])+" "+(v()("style-288510",g)||"")},!!l.length&&n.a.createElement("div",{className:E.a.dynamic([["481084198",[S.a.color_bg,S.a.radius_xs,S.a.border,S.a.radius_xs]]])+" like"},n.a.createElement(k.a,{align:"start"},n.a.createElement(d.p,{className:"t-24 l-34 t-primary",type:"like"}),n.a.createElement(k.a.Item,{className:"t-24 l-34 t-primary"},l.filter(function(e,t){return u||t<12}).map(function(e,t){return n.a.createElement(n.a.Fragment,{key:e.userId},n.a.createElement(d.t,{href:"/person/zone?id=".concat(e.userId),as:"/person/zone/".concat(e.userId)},e.niname),t!==l.length-1&&n.a.createElement("span",{className:E.a.dynamic([["481084198",[S.a.color_bg,S.a.radius_xs,S.a.border,S.a.radius_xs]]])},"，"))}),!u&&l.length>12&&n.a.createElement("span",{onClick:function(){return a.page.onLikeLogsOpen(o)},className:E.a.dynamic([["481084198",[S.a.color_bg,S.a.radius_xs,S.a.border,S.a.radius_xs]]])+" t-sub"},"展开",n.a.createElement(d.p,{className:"t-24 l-34 t-sub ml-4",type:"down"}))))),_&&n.a.createElement("div",{className:E.a.dynamic([["481084198",[S.a.color_bg,S.a.radius_xs,S.a.border,S.a.radius_xs]]])+" line"}),!!h.length&&n.a.createElement("div",{className:E.a.dynamic([["481084198",[S.a.color_bg,S.a.radius_xs,S.a.border,S.a.radius_xs]]])+" comment"},h.filter(function(e,t){return t<f}).map(function(e,t){var i=r!=e.parId&&0!=e.parId;return n.a.createElement("p",{key:e.tbId,onClick:function(t){t.stopPropagation(),p.a.checkLogin(function(){return a.page.onCommentClick(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},r=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),r.forEach(function(t){P(e,t,a[t])})}return e}({infoId:o},e))})},className:E.a.dynamic([["481084198",[S.a.color_bg,S.a.radius_xs,S.a.border,S.a.radius_xs]]])+" "+(v()("p-comment-item t-30 l-42",{"mt-8":0!==t})||"")},n.a.createElement(d.t,{className:"t-primary",href:"/person/zone?id=".concat(e.userId),as:"/person/zone/".concat(e.userId)},e.name),!i&&n.a.createElement("span",{className:E.a.dynamic([["481084198",[S.a.color_bg,S.a.radius_xs,S.a.border,S.a.radius_xs]]])},"："),i&&n.a.createElement("span",{className:E.a.dynamic([["481084198",[S.a.color_bg,S.a.radius_xs,S.a.border,S.a.radius_xs]]])+" ml-4"},"回复"),i&&n.a.createElement("span",{onClick:function(){return p.a.router.push("/person/zone?id=".concat(e.userId),"/person/zone/".concat(e.userId))},className:E.a.dynamic([["481084198",[S.a.color_bg,S.a.radius_xs,S.a.border,S.a.radius_xs]]])+" t-primary ml-4"},e.parNiname),i&&n.a.createElement("span",{className:E.a.dynamic([["481084198",[S.a.color_bg,S.a.radius_xs,S.a.border,S.a.radius_xs]]])},"："),n.a.createElement("span",{className:E.a.dynamic([["481084198",[S.a.color_bg,S.a.radius_xs,S.a.border,S.a.radius_xs]]])},p.a.emojify(e.text)))}),b>f&&n.a.createElement("p",{className:E.a.dynamic([["481084198",[S.a.color_bg,S.a.radius_xs,S.a.border,S.a.radius_xs]]])+" t-30 l-42 mt-16"},n.a.createElement("span",{className:E.a.dynamic([["481084198",[S.a.color_bg,S.a.radius_xs,S.a.border,S.a.radius_xs]]])},"更多精彩回复"),n.a.createElement(d.t,{className:"t-primary ml-4",href:"/discovery/detail?id=".concat(o),as:"/discovery/detail/".concat(o)},"点击查看"))),n.a.createElement(E.a,{styleId:"481084198",css:".style-288510.__jsx-style-dynamic-selector{background:".concat(S.a.color_bg,";border-radius:").concat(S.a.radius_xs,";}.like.__jsx-style-dynamic-selector{padding:0.16rem;}.comment.__jsx-style-dynamic-selector{padding:0.16rem;}.line.__jsx-style-dynamic-selector{border-top:").concat(S.a.border,";}.p-comment-item.__jsx-style-dynamic-selector{word-break:break-all;border-radius:").concat(S.a.radius_xs,";}.p-comment-item.__jsx-style-dynamic-selector:active{background-color:rgba(0,0,0,0.08);}"),dynamic:[S.a.color_bg,S.a.radius_xs,S.a.border,S.a.radius_xs]}))};T.contextTypes={$:i.a.object};var A=Object(c.d)(T);var C=function(e,t){var a,r,o,i=t.$,c=e.atList,l=e.comCountAll,u=e.commentList,m=e.con,f=e.faceImg,y=e.fanAuth,b=e.fileList,g=e.grade,h=e.infoAddress,_=e.infoId,w=e.infoType,I=e.isConcern,j=e.likeCount,S=e.likeList,P=e.likeRecordsOpen,T=e.niname,C=e.publishTime,L=e.redPacket,R=e.redRecordsOpen,z=e.rewardNum,D=e.role,M=e.skinStyle,$=e.tbId,V=e.userId,F=e.userLat,U=e.userLong,B=e.vip,G=e.className,J=i.getState("userInfo"),Q=!!J.userId&&-1!==S.findIndex(function(e){return e.userId===J.userId});return n.a.createElement(x.a.Item,{className:v()("style-653984",G,(a={},r="tool-".concat(M),o=!!M,r in a?Object.defineProperty(a,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):a[r]=o,a)),wrap:!0},n.a.createElement(k.a,{align:"start"},n.a.createElement(k.a.Item,null,n.a.createElement(s.b,{userId:V,img:f,name:T,level:g,fansAuth:y,vip:B,role:D})),0==I&&n.a.createElement(d.c,{type:"primary",inline:!0,ghost:!0,size:"xs",onClick:function(){return p.a.checkLogin(function(){return i.do.follow(V,_)})}},"+关注")),n.a.createElement("div",{className:"jsx-1403547384 content"},n.a.createElement(O.a,{infoId:_,atList:c&&JSON.parse(c),content:m,files:b,red:L,redRecordsOpen:R,type:w,params:{video:{height:"50vw"}}}),h&&n.a.createElement(s.a,{className:"t-24 l-34 t-primary mt-18",address:h,long:U,lat:F}),n.a.createElement(N,{className:"mt-18",infoId:_,liked:Q,likeCount:j,rewardNum:z,date:C}),n.a.createElement(A,{className:"mt-24",id:$,infoId:_,total:l,likeData:S,commentList:u,likeRecordsOpen:P})),n.a.createElement(E.a,{styleId:"1403547384",css:".content.jsx-1403547384{margin-top:-0.2rem;margin-left:0.88rem;}"}))};C.contextTypes={$:i.a.object};var L=Object(c.d)(C);function R(){return(R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}var z=function(e,t){var a=t.$,r=e.className,o=a.getState("_discoveryRow"),i=o.redOpenIds,c=o.likeOpenIds,s=a.getState("discovery");return n.a.createElement(d.v,{className:v()("style-497800",r),data:s,refresh:!0,renderRow:function(e){return n.a.createElement(L,R({redRecordsOpen:i.includes(e.infoId),likeRecordsOpen:c.includes(e.infoId)},e))},onEndReached:a.fetch.discovery})};z.contextTypes={$:i.a.object};var D=Object(c.d)(z),M=function(e,t){var a=t.$,r=e.className,o=a.getState("_fixedTextarea"),i=o.show,c=o.placeholder,s=o.onSubmit;return n.a.createElement(d.k,{className:v()("style-286679",r),show:i,placeholder:c,onSubmit:s,onClose:a.page.hideFixedTextarea})};M.contextTypes={$:i.a.object};var $,V,F=Object(c.d)(M),U=a(9),B=a.n(U),G=a(11),J=a(12),Q=a(15),q=a(7);function K(e){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function X(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function W(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Y(e,t,a,r,n,o,i){try{var c=e[o](i),s=c.value}catch(e){return void a(e)}c.done?t(s):Promise.resolve(s).then(r,n)}function H(e){return function(){var t=this,a=arguments;return new Promise(function(r,n){var o=e.apply(t,a);function i(e){Y(o,r,n,i,c,"next",e)}function c(e){Y(o,r,n,i,c,"throw",e)}i(void 0)})}}function Z(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ee(e){return(ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function te(e,t){return(te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ae(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var re,ne,oe,ie,ce,se,le,ue,me,de=($=function(e){function t(){var e,a,r,o,i,c,s,u,m,d,b,g,h,v;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var _=arguments.length,x=new Array(_),w=0;w<_;w++)x[w]=arguments[w];return r=this,o=(e=ee(t)).call.apply(e,[this].concat(x)),a=!o||"object"!==K(o)&&"function"!=typeof o?ae(r):o,i=a,c="state",s=V,u=ae(ae(a)),s&&Object.defineProperty(i,c,{enumerable:s.enumerable,configurable:s.configurable,writable:s.writable,value:s.initializer?s.initializer.call(u):void 0}),a.params={__cache:!0,queryDiscovery:{}},a.setQuery={discovery:function(e){var t;switch(y.b[e].title){case"最新":t={_:{limit:q.a.__LIMIT__,search:{viewType:0}}};break;case"精选":t={_:{limit:q.a.__LIMIT__,search:{isReclist:1}}};break;case"渔获":t={_:{limit:q.a.__LIMIT__,search:{"dtsourceCategory[>]":0}}};break;case"好友":t={_:{limit:q.a.__LIMIT__,search:{viewType:1}}}}a.setParams({queryDiscovery:t})}},a.fetch={config:{static:["userInfo"],one:["checkDiscoverySpecialNew"],update:[["discovery",!0]]},userInfo:(d=H(B.a.mark(function e(){var t;return B.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.a.fetchUserInfo(),e.t0=a,e.next=4,t;case 4:return e.t1=e.sent,e.t0.setState.call(e.t0,e.t1,"userInfo"),e.abrupt("return",t);case 7:case"end":return e.stop()}},e,this)})),function(){return d.apply(this,arguments)}),discovery:function(e){var t=a.params.queryDiscovery;return a.fetchListThenSetState("get_discovery_list","discovery",t,e,"publishTime")},updateOneDiscovery:function(e){return a.updateOneThenSetState("get_discovery_list","discovery",{infoId:e})},checkDiscoverySpecialNew:(m=H(B.a.mark(function e(){var t,r,n,o,i,c,s;return B.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.getState("_affixTabs"),r=t.page,n=f.a.getState("discoverySpecial"),(o=n.time)||(o=Math.floor(p.a.getTimestamp()/1e3)-86400),e.next=5,Q.a.P("get_discovery_list",{_:{limit:1,search:{isReclist:1,"publishTime[>]":o}}});case 5:(i=e.sent).list.length&&(c=i.list[0].publishTime,s=i.pageinfo.recordtotal,f.a.discoverySpecialSetNew(c,s,r===y.b.findIndex(function(e){return"精选"===e.title})));case 7:case"end":return e.stop()}},e,this)})),function(){return m.apply(this,arguments)})},a.do={toggleLike:(v=H(B.a.mark(function e(t){return B.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q.a.P("do_like",{infoId:t});case 2:a.fetch.updateOneDiscovery(t);case 3:case"end":return e.stop()}},e,this)})),function(e){return v.apply(this,arguments)}),comment:(h=H(B.a.mark(function e(t,r){var n,o;return B.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(p.a.getCharLength(t.con)<2)){e.next=3;break}return p.a.light("回复的字数不能少于2"),e.abrupt("return",!1);case 3:if(f.a.insertReply(t.con)){e.next=6;break}return p.a.light("检测到最近有类似回复，请不要恶意灌水"),e.abrupt("return",!1);case 6:return e.next=8,Q.a.P("do_comment",t);case 8:return n=e.sent,o=n.point,a.page.hideFixedTextarea(),p.a.light(0==o?"回复成功":"回复成功，积分+".concat(o)),a.fetch.updateOneDiscovery(r),e.abrupt("return",!0);case 14:case"end":return e.stop()}},e,this)})),function(e,t){return h.apply(this,arguments)}),follow:(g=H(B.a.mark(function e(t,r){return B.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q.a.P("do_add_follow",{concernId:t});case 2:p.a.light("关注成功"),a.fetch.updateOneDiscovery(r);case 4:case"end":return e.stop()}},e,this)})),function(e,t){return g.apply(this,arguments)}),redClick:(b=H(B.a.mark(function e(t,r,o){var i,c,s,u;return B.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q.a.PP("do_redpacket_get",{packetId:t});case 2:i=e.sent,s="",e.t0=parseInt(r),e.next=1===e.t0?7:2===e.t0?11:3===e.t0?14:4===e.t0?17:21;break;case 7:return c="金币",s="枚",u="/person/coin",e.abrupt("break",22);case 11:return s="积分",u="/person/grade",e.abrupt("break",22);case 14:return s="元",u="/person/wallet",e.abrupt("break",22);case 17:return c="优惠券",s="元",u="/person/prize",e.abrupt("break",22);case 21:return e.abrupt("break",22);case 22:0!==i.code?p.a.light(i.err):l.a.showMask({children:n.a.createElement(k.a,{direction:"column",style:{position:"relative"},onClick:l.a.hideMask},n.a.createElement("img",{key:"1",src:"".concat(y.a,"/red-modal.png"),style:{width:"5.62rem",height:"8.84rem"},alt:""}),n.a.createElement("p",{key:"2",className:"t-36 t-c",style:{position:"absolute",top:0,left:0,width:"100%",marginTop:"100%",color:"#FBD371"}},"您抢到了",i.data,s,c),n.a.createElement("div",{key:"3",style:{position:"absolute",top:0,left:0,width:"100%",height:"0.64rem",marginTop:"130%"},onClick:function(e){e.stopPropagation(),p.a.router.push(u)}}))}),a.fetch.updateOneDiscovery(o);case 24:case"end":return e.stop()}},e,this)})),function(e,t,a){return b.apply(this,arguments)})},a.page={onTabClick:function(e,t){var r=y.b[t].title,n=function(){a.setQuery.discovery(t),a.fetch.discovery(!0),a.setState({page:t},"_affixTabs")};"精选"===r&&f.a.discoverySpecialSetReaded(),"好友"===r?p.a.checkLogin(n):n(),p.a.scrollTo(0)},onCommentClick:function(e){var t,r;e.userId?(t="回复".concat(e.name,"："),r=function(t){return a.do.comment({parId:e.tbId,con:t},e.infoId)}):(t="回复：",r=function(t){return a.do.comment({infoId:e.infoId,con:t},e.infoId)}),a.page.showFixedTextarea({placeholder:t,onSubmit:r})},onLikeLogsOpen:function(e){var t=a.getState("_discoveryRow").likeOpenIds;a.setState({likeOpenIds:W(t).concat([e])},"_discoveryRow")},onRedLogsOpen:function(e){var t=a.getState("_discoveryRow").redOpenIds;a.setState({redOpenIds:W(t).concat([e])},"_discoveryRow")},showFixedTextarea:function(e){return a.setState(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},r=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),r.forEach(function(t){X(e,t,a[t])})}return e}({},e,{show:!0}),"_fixedTextarea")},hideFixedTextarea:function(){return a.setState({show:!1},"_fixedTextarea")}},a}var a,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&te(e,t)}(t,J["a"]),a=t,(r=[{key:"storeInit",value:function(){var e=this.params.params.id,t=void 0===e?0:e;this.setQuery.discovery(t),this.setState({page:t},"_affixTabs")}}])&&Z(a.prototype,r),o&&Z(a,o),t}(),re=$.prototype,ne="state",oe=[G.k],ie={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.initState({_affixTabs:{page:0},_discoveryRow:{redOpenIds:[],likeOpenIds:[]},_fixedTextarea:{show:!1,placeholder:"",onSubmit:Function.prototype},userInfo:f.a.toJS("userInfo"),discovery:q.a.__EMPTY__})}},se={},Object.keys(ie).forEach(function(e){se[e]=ie[e]}),se.enumerable=!!se.enumerable,se.configurable=!!se.configurable,("value"in se||se.initializer)&&(se.writable=!0),se=oe.slice().reverse().reduce(function(e,t){return t(re,ne,e)||e},se),ce&&void 0!==se.initializer&&(se.value=se.initializer?se.initializer.call(ce):void 0,se.initializer=void 0),void 0===se.initializer&&(Object.defineProperty(re,ne,se),se=null),V=se,$);function pe(e){return(pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fe(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ye(e,t){return!t||"object"!==pe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function be(e){return(be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ge(e,t){return(ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var he=Object(c.c)(de)(le=Object(c.d)((me=ue=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ye(this,be(t).apply(this,arguments))}var a,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ge(e,t)}(t,n.a.Component),a=t,(r=[{key:"componentWillUnmount",value:function(){this.context.$.page.hideFixedTextarea(),l.a.hideMask()}},{key:"render",value:function(){return n.a.createElement(s.k,{title:"动态",header:n.a.createElement(g,null)},n.a.createElement(D,{className:"mt-d"}),n.a.createElement(F,null))}}])&&fe(a.prototype,r),o&&fe(a,o),t}(),ue.contextTypes={$:i.a.object},le=me))||le)||le;t.default=he}},[[830,1,0]]]);